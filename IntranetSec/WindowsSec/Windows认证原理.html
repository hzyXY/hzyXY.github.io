<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://hzyxy.github.io/IntranetSec/WindowsSec/Windows%E8%AE%A4%E8%AF%81%E5%8E%9F%E7%90%86.html"><meta property="og:site_name" content="XY"><meta property="og:title" content="Windows认证原理"><meta property="og:description" content="Windows认证原理 Windows认证 本地认证 网络认证 域认证 Windwos存放密码的文件： C:\Windows\System32\config\SAM %SystemRoot%\system32\config\SAM 用来认证的程序：Lsass.exe Windwos本地认证 本地认证流程 Windows的登陆密码是储存在系统本地的SAM文件中的，在登陆Windows的时候，系统会将用户输入的密码与SAM文件中的密码进行对比，如果相同，则认证成功 自己不可以打开SAM文件"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="XY"><meta property="article:tag" content="Windows系统内网安全"><meta property="article:published_time" content="2022-11-21T00:00:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Windows认证原理","image":[""],"datePublished":"2022-11-21T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"XY","url":"https://hzyxy.github.io"}]}</script><title>Windows认证原理 | XY</title><meta name="description" content="Windows认证原理 Windows认证 本地认证 网络认证 域认证 Windwos存放密码的文件： C:\Windows\System32\config\SAM %SystemRoot%\system32\config\SAM 用来认证的程序：Lsass.exe Windwos本地认证 本地认证流程 Windows的登陆密码是储存在系统本地的SAM文件中的，在登陆Windows的时候，系统会将用户输入的密码与SAM文件中的密码进行对比，如果相同，则认证成功 自己不可以打开SAM文件">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-3d9ff12a.css" as="style"><link rel="stylesheet" href="/assets/style-3d9ff12a.css">
    <link rel="modulepreload" href="/assets/app-dd5faae6.js"><link rel="modulepreload" href="/assets/framework-b6a07282.js"><link rel="modulepreload" href="/assets/Windows认证原理.html-2b5bfa63.js"><link rel="modulepreload" href="/assets/Windows认证原理.html-8fbaf98e.js"><link rel="prefetch" href="/assets/intro.html-85095aee.js" as="script"><link rel="prefetch" href="/assets/index.html-c517837e.js" as="script"><link rel="prefetch" href="/assets/slides.html-e30de825.js" as="script"><link rel="prefetch" href="/assets/index.html-55939d36.js" as="script"><link rel="prefetch" href="/assets/index.html-da0d688b.js" as="script"><link rel="prefetch" href="/assets/index.html-2c2b5f3c.js" as="script"><link rel="prefetch" href="/assets/index.html-938100e2.js" as="script"><link rel="prefetch" href="/assets/index.html-d1a03358.js" as="script"><link rel="prefetch" href="/assets/一句话木马集合.html-18b3a34a.js" as="script"><link rel="prefetch" href="/assets/反弹Shell.html-d1786afc.js" as="script"><link rel="prefetch" href="/assets/LInux应急响应.html-6337519e.js" as="script"><link rel="prefetch" href="/assets/Linux提权.html-1f6bf0b3.js" as="script"><link rel="prefetch" href="/assets/index.html-038c0d41.js" as="script"><link rel="prefetch" href="/assets/Metasploit工具使用.html-942fa2b5.js" as="script"><link rel="prefetch" href="/assets/index.html-a88fa1fa.js" as="script"><link rel="prefetch" href="/assets/内网代理.html-09e81afe.js" as="script"><link rel="prefetch" href="/assets/PHP基础语法.html-88060ba8.js" as="script"><link rel="prefetch" href="/assets/index.html-1e040f9c.js" as="script"><link rel="prefetch" href="/assets/IPC横向移动.html-eff7a44c.js" as="script"><link rel="prefetch" href="/assets/Kerberos白银票据.html-f5e7fa6b.js" as="script"><link rel="prefetch" href="/assets/Kerberos黄金票据.html-ea85d83b.js" as="script"><link rel="prefetch" href="/assets/Mimikatz工具的使用.html-a92435df.js" as="script"><link rel="prefetch" href="/assets/PsExec工具远程命令执行横向移动.html-0fc96c4d.js" as="script"><link rel="prefetch" href="/assets/PTT攻击之MS14-068.html-a4c4ee1a.js" as="script"><link rel="prefetch" href="/assets/RDP密码获取.html-69031c6f.js" as="script"><link rel="prefetch" href="/assets/index.html-6e17e1c5.js" as="script"><link rel="prefetch" href="/assets/smbexec横向移动.html-a3ca7a5f.js" as="script"><link rel="prefetch" href="/assets/Windows域认证.html-bab92ead.js" as="script"><link rel="prefetch" href="/assets/Windows应急响应.html-95dce042.js" as="script"><link rel="prefetch" href="/assets/Windows提权.html-d1885a09.js" as="script"><link rel="prefetch" href="/assets/Windows权限维持.html-8b81542b.js" as="script"><link rel="prefetch" href="/assets/Windows被抓密码的防御手段.html-8e938312.js" as="script"><link rel="prefetch" href="/assets/WMIC远程命令执行横向移动.html-0f6cda22.js" as="script"><link rel="prefetch" href="/assets/内网IP信息收集（工具）.html-dcb383ee.js" as="script"><link rel="prefetch" href="/assets/内网主机基本信息收集.html-076b4f32.js" as="script"><link rel="prefetch" href="/assets/内网端口信息收集.html-85889a23.js" as="script"><link rel="prefetch" href="/assets/哈希传递攻击（PTH）.html-f7708546.js" as="script"><link rel="prefetch" href="/assets/域内基础信息收集.html-e3e4be63.js" as="script"><link rel="prefetch" href="/assets/密码喷洒攻击.html-27dc1386.js" as="script"><link rel="prefetch" href="/assets/密钥传递攻击（PTK）.html-a37a41ec.js" as="script"><link rel="prefetch" href="/assets/抓取Windows密码.html-819120ad.js" as="script"><link rel="prefetch" href="/assets/敏感信息收集.html-3fae222c.js" as="script"><link rel="prefetch" href="/assets/浏览器、数据库等其他密码的抓取.html-7e47176a.js" as="script"><link rel="prefetch" href="/assets/票据传递攻击（PTT）.html-e7dd71db.js" as="script"><link rel="prefetch" href="/assets/Python-requests模块.html-6b5acd07.js" as="script"><link rel="prefetch" href="/assets/index.html-32937562.js" as="script"><link rel="prefetch" href="/assets/index.html-cfa34ac3.js" as="script"><link rel="prefetch" href="/assets/index.html-d96610ee.js" as="script"><link rel="prefetch" href="/assets/index.html-a128c3b9.js" as="script"><link rel="prefetch" href="/assets/01Meow.html-6fb11283.js" as="script"><link rel="prefetch" href="/assets/02Fawn.html-a62258a2.js" as="script"><link rel="prefetch" href="/assets/03Dancing.html-f1becab3.js" as="script"><link rel="prefetch" href="/assets/04Redeemer.html-cc7356ff.js" as="script"><link rel="prefetch" href="/assets/05Appointment.html-49e5be75.js" as="script"><link rel="prefetch" href="/assets/06Sequel.html-1036fc61.js" as="script"><link rel="prefetch" href="/assets/07Crocodile.html-cb7cf7b2.js" as="script"><link rel="prefetch" href="/assets/08Responder.html-f7e76995.js" as="script"><link rel="prefetch" href="/assets/index.html-70844bef.js" as="script"><link rel="prefetch" href="/assets/index.html-cd0b7f44.js" as="script"><link rel="prefetch" href="/assets/Web信息收集.html-37297f4a.js" as="script"><link rel="prefetch" href="/assets/Fastjson反序列化漏洞.html-76a8a7f2.js" as="script"><link rel="prefetch" href="/assets/Log4j漏洞.html-005e50ee.js" as="script"><link rel="prefetch" href="/assets/index.html-5abeedf0.js" as="script"><link rel="prefetch" href="/assets/Redis未授权访问.html-7064ef7c.js" as="script"><link rel="prefetch" href="/assets/Shiro反序列化漏洞.html-13ce1675.js" as="script"><link rel="prefetch" href="/assets/Spring Cloud Gateway RCE漏洞.html-b0ff7ea8.js" as="script"><link rel="prefetch" href="/assets/Spring Framework RCE漏洞.html-8d75b5e2.js" as="script"><link rel="prefetch" href="/assets/Struts2 RCE漏洞.html-d56baeb5.js" as="script"><link rel="prefetch" href="/assets/CSRF跨站请求伪造.html-d86f6a3e.js" as="script"><link rel="prefetch" href="/assets/PHP反序列化漏洞.html-51d0d262.js" as="script"><link rel="prefetch" href="/assets/index.html-c72ca44e.js" as="script"><link rel="prefetch" href="/assets/SQL注入.html-d5ea2027.js" as="script"><link rel="prefetch" href="/assets/SSRF服务器请求伪造.html-e235d4f6.js" as="script"><link rel="prefetch" href="/assets/SSTI模板注入.html-6d413bf5.js" as="script"><link rel="prefetch" href="/assets/XSS跨站脚本攻击.html-9115714d.js" as="script"><link rel="prefetch" href="/assets/XXE外部实体注入.html-f9c10bdf.js" as="script"><link rel="prefetch" href="/assets/文件上传漏洞.html-736c8008.js" as="script"><link rel="prefetch" href="/assets/文件包含漏洞.html-b1978607.js" as="script"><link rel="prefetch" href="/assets/远程代码执行.html-95a2aaf5.js" as="script"><link rel="prefetch" href="/assets/逻辑漏洞.html-aa2be5ca.js" as="script"><link rel="prefetch" href="/assets/404.html-843e1bd1.js" as="script"><link rel="prefetch" href="/assets/index.html-8ecd10e6.js" as="script"><link rel="prefetch" href="/assets/index.html-b46eb32d.js" as="script"><link rel="prefetch" href="/assets/index.html-7fd5e2f0.js" as="script"><link rel="prefetch" href="/assets/index.html-95a4be4a.js" as="script"><link rel="prefetch" href="/assets/index.html-70b4861a.js" as="script"><link rel="prefetch" href="/assets/index.html-50f2a08d.js" as="script"><link rel="prefetch" href="/assets/index.html-0ad3875a.js" as="script"><link rel="prefetch" href="/assets/index.html-1da3ae35.js" as="script"><link rel="prefetch" href="/assets/index.html-6e4c31eb.js" as="script"><link rel="prefetch" href="/assets/index.html-beae3398.js" as="script"><link rel="prefetch" href="/assets/index.html-314a48b4.js" as="script"><link rel="prefetch" href="/assets/index.html-641bac96.js" as="script"><link rel="prefetch" href="/assets/index.html-afaa875e.js" as="script"><link rel="prefetch" href="/assets/index.html-6756f4e1.js" as="script"><link rel="prefetch" href="/assets/index.html-8c7ba3e6.js" as="script"><link rel="prefetch" href="/assets/index.html-2fd28e83.js" as="script"><link rel="prefetch" href="/assets/index.html-b787cca3.js" as="script"><link rel="prefetch" href="/assets/index.html-a2e579ab.js" as="script"><link rel="prefetch" href="/assets/index.html-5f2fc615.js" as="script"><link rel="prefetch" href="/assets/index.html-af135525.js" as="script"><link rel="prefetch" href="/assets/index.html-e66f144e.js" as="script"><link rel="prefetch" href="/assets/index.html-9ba30c95.js" as="script"><link rel="prefetch" href="/assets/index.html-40443127.js" as="script"><link rel="prefetch" href="/assets/index.html-4c886121.js" as="script"><link rel="prefetch" href="/assets/index.html-fa457839.js" as="script"><link rel="prefetch" href="/assets/index.html-328f77a8.js" as="script"><link rel="prefetch" href="/assets/intro.html-f7b7eb36.js" as="script"><link rel="prefetch" href="/assets/index.html-4b5152a1.js" as="script"><link rel="prefetch" href="/assets/slides.html-ed20dba7.js" as="script"><link rel="prefetch" href="/assets/index.html-25a8fc05.js" as="script"><link rel="prefetch" href="/assets/index.html-7fdf5872.js" as="script"><link rel="prefetch" href="/assets/index.html-7ba3d324.js" as="script"><link rel="prefetch" href="/assets/index.html-0de0e79b.js" as="script"><link rel="prefetch" href="/assets/index.html-dc8413fd.js" as="script"><link rel="prefetch" href="/assets/一句话木马集合.html-bfb1572f.js" as="script"><link rel="prefetch" href="/assets/反弹Shell.html-797e5b14.js" as="script"><link rel="prefetch" href="/assets/LInux应急响应.html-aba22fdf.js" as="script"><link rel="prefetch" href="/assets/Linux提权.html-66e972dc.js" as="script"><link rel="prefetch" href="/assets/index.html-705a3912.js" as="script"><link rel="prefetch" href="/assets/Metasploit工具使用.html-c6258075.js" as="script"><link rel="prefetch" href="/assets/index.html-04b83dca.js" as="script"><link rel="prefetch" href="/assets/内网代理.html-70f207a9.js" as="script"><link rel="prefetch" href="/assets/PHP基础语法.html-2b00abdd.js" as="script"><link rel="prefetch" href="/assets/index.html-27824dcd.js" as="script"><link rel="prefetch" href="/assets/IPC横向移动.html-5036eef2.js" as="script"><link rel="prefetch" href="/assets/Kerberos白银票据.html-6b1b7542.js" as="script"><link rel="prefetch" href="/assets/Kerberos黄金票据.html-2bcfa1be.js" as="script"><link rel="prefetch" href="/assets/Mimikatz工具的使用.html-4dabd55e.js" as="script"><link rel="prefetch" href="/assets/PsExec工具远程命令执行横向移动.html-cf6031b8.js" as="script"><link rel="prefetch" href="/assets/PTT攻击之MS14-068.html-229ab676.js" as="script"><link rel="prefetch" href="/assets/RDP密码获取.html-f5314187.js" as="script"><link rel="prefetch" href="/assets/index.html-291cdb7d.js" as="script"><link rel="prefetch" href="/assets/smbexec横向移动.html-bd3f9d0f.js" as="script"><link rel="prefetch" href="/assets/Windows域认证.html-98aaffb7.js" as="script"><link rel="prefetch" href="/assets/Windows应急响应.html-cb7f7d9e.js" as="script"><link rel="prefetch" href="/assets/Windows提权.html-fddcc760.js" as="script"><link rel="prefetch" href="/assets/Windows权限维持.html-b420726d.js" as="script"><link rel="prefetch" href="/assets/Windows被抓密码的防御手段.html-a1b95692.js" as="script"><link rel="prefetch" href="/assets/WMIC远程命令执行横向移动.html-e9900fd2.js" as="script"><link rel="prefetch" href="/assets/内网IP信息收集（工具）.html-8df714c3.js" as="script"><link rel="prefetch" href="/assets/内网主机基本信息收集.html-ff647eb7.js" as="script"><link rel="prefetch" href="/assets/内网端口信息收集.html-9904c743.js" as="script"><link rel="prefetch" href="/assets/哈希传递攻击（PTH）.html-177bbb68.js" as="script"><link rel="prefetch" href="/assets/域内基础信息收集.html-e9796b82.js" as="script"><link rel="prefetch" href="/assets/密码喷洒攻击.html-7202336d.js" as="script"><link rel="prefetch" href="/assets/密钥传递攻击（PTK）.html-5481af39.js" as="script"><link rel="prefetch" href="/assets/抓取Windows密码.html-c248c027.js" as="script"><link rel="prefetch" href="/assets/敏感信息收集.html-8d79e8c8.js" as="script"><link rel="prefetch" href="/assets/浏览器、数据库等其他密码的抓取.html-019a4e5a.js" as="script"><link rel="prefetch" href="/assets/票据传递攻击（PTT）.html-acdf0e38.js" as="script"><link rel="prefetch" href="/assets/Python-requests模块.html-30766057.js" as="script"><link rel="prefetch" href="/assets/index.html-03b50ebd.js" as="script"><link rel="prefetch" href="/assets/index.html-944a9b7c.js" as="script"><link rel="prefetch" href="/assets/index.html-3c91f418.js" as="script"><link rel="prefetch" href="/assets/index.html-2216da59.js" as="script"><link rel="prefetch" href="/assets/01Meow.html-144f49c2.js" as="script"><link rel="prefetch" href="/assets/02Fawn.html-8d1f6ae7.js" as="script"><link rel="prefetch" href="/assets/03Dancing.html-102195cf.js" as="script"><link rel="prefetch" href="/assets/04Redeemer.html-a8f14750.js" as="script"><link rel="prefetch" href="/assets/05Appointment.html-47ea2d01.js" as="script"><link rel="prefetch" href="/assets/06Sequel.html-09623ec6.js" as="script"><link rel="prefetch" href="/assets/07Crocodile.html-d98953a2.js" as="script"><link rel="prefetch" href="/assets/08Responder.html-bd8c11b2.js" as="script"><link rel="prefetch" href="/assets/index.html-52add0e3.js" as="script"><link rel="prefetch" href="/assets/index.html-587e9e41.js" as="script"><link rel="prefetch" href="/assets/Web信息收集.html-10f53862.js" as="script"><link rel="prefetch" href="/assets/Fastjson反序列化漏洞.html-5eab3d81.js" as="script"><link rel="prefetch" href="/assets/Log4j漏洞.html-4b853947.js" as="script"><link rel="prefetch" href="/assets/index.html-d4c7bcc7.js" as="script"><link rel="prefetch" href="/assets/Redis未授权访问.html-97f79a4a.js" as="script"><link rel="prefetch" href="/assets/Shiro反序列化漏洞.html-8f4ec688.js" as="script"><link rel="prefetch" href="/assets/Spring Cloud Gateway RCE漏洞.html-2b0045b8.js" as="script"><link rel="prefetch" href="/assets/Spring Framework RCE漏洞.html-ee4c9f39.js" as="script"><link rel="prefetch" href="/assets/Struts2 RCE漏洞.html-5fa3d7d9.js" as="script"><link rel="prefetch" href="/assets/CSRF跨站请求伪造.html-87e13702.js" as="script"><link rel="prefetch" href="/assets/PHP反序列化漏洞.html-28157585.js" as="script"><link rel="prefetch" href="/assets/index.html-99a33745.js" as="script"><link rel="prefetch" href="/assets/SQL注入.html-53392527.js" as="script"><link rel="prefetch" href="/assets/SSRF服务器请求伪造.html-ef95986f.js" as="script"><link rel="prefetch" href="/assets/SSTI模板注入.html-f2d5f40a.js" as="script"><link rel="prefetch" href="/assets/XSS跨站脚本攻击.html-8294e366.js" as="script"><link rel="prefetch" href="/assets/XXE外部实体注入.html-101c7226.js" as="script"><link rel="prefetch" href="/assets/文件上传漏洞.html-a84a5b23.js" as="script"><link rel="prefetch" href="/assets/文件包含漏洞.html-3194d1e6.js" as="script"><link rel="prefetch" href="/assets/远程代码执行.html-e618985b.js" as="script"><link rel="prefetch" href="/assets/逻辑漏洞.html-8dbed891.js" as="script"><link rel="prefetch" href="/assets/404.html-7a9bea77.js" as="script"><link rel="prefetch" href="/assets/index.html-1a0a8b98.js" as="script"><link rel="prefetch" href="/assets/index.html-1bd72bd1.js" as="script"><link rel="prefetch" href="/assets/index.html-b7fc2931.js" as="script"><link rel="prefetch" href="/assets/index.html-39379dee.js" as="script"><link rel="prefetch" href="/assets/index.html-f287dbf8.js" as="script"><link rel="prefetch" href="/assets/index.html-4c0c108a.js" as="script"><link rel="prefetch" href="/assets/index.html-9fb86865.js" as="script"><link rel="prefetch" href="/assets/index.html-f17b6ccd.js" as="script"><link rel="prefetch" href="/assets/index.html-d1033906.js" as="script"><link rel="prefetch" href="/assets/index.html-e7218a45.js" as="script"><link rel="prefetch" href="/assets/index.html-fb9fa453.js" as="script"><link rel="prefetch" href="/assets/index.html-202a0a0d.js" as="script"><link rel="prefetch" href="/assets/index.html-fc11a95c.js" as="script"><link rel="prefetch" href="/assets/index.html-3938cc83.js" as="script"><link rel="prefetch" href="/assets/index.html-6eed2045.js" as="script"><link rel="prefetch" href="/assets/index.html-15182f4c.js" as="script"><link rel="prefetch" href="/assets/index.html-b7795669.js" as="script"><link rel="prefetch" href="/assets/index.html-9b3cf9f5.js" as="script"><link rel="prefetch" href="/assets/index.html-1c00757f.js" as="script"><link rel="prefetch" href="/assets/index.html-3554c543.js" as="script"><link rel="prefetch" href="/assets/index.html-e8fe7f5f.js" as="script"><link rel="prefetch" href="/assets/index.html-db6da400.js" as="script"><link rel="prefetch" href="/assets/index.html-3d48f19b.js" as="script"><link rel="prefetch" href="/assets/index.html-659ae5f3.js" as="script"><link rel="prefetch" href="/assets/index.html-3af6b4cb.js" as="script"><link rel="prefetch" href="/assets/index.html-2401145c.js" as="script"><link rel="prefetch" href="/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/assets/index-b03bef79.js" as="script"><link rel="prefetch" href="/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-253d1f76.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-a794bb63.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-224f94d9.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-e5069ce0.js" as="script"><link rel="prefetch" href="/assets/search.esm-2c3fba7d.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-9ef1efef.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-36cd6c3c.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.png" alt="XY"><!----><span class="site-name hide-in-pad">XY</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="主页"><span class="font-icon icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/WebSec/" class="nav-link" aria-label="Web安全"><span class="font-icon icon iconfont icon-sidebar" style=""></span>Web安全<!----></a></div><div class="nav-item hide-in-mobile"><a href="/IntranetSec/" class="nav-link active" aria-label="内网安全"><span class="font-icon icon iconfont icon-computer" style=""></span>内网安全<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="编程语言"><span class="title"><span class="font-icon icon iconfont icon-code" style=""></span>编程语言</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/code/python/" class="nav-link" aria-label="Python"><span class="font-icon icon iconfont icon-python" style=""></span>Python<!----></a></li><li class="dropdown-item"><a href="/code/php/" class="nav-link" aria-label="PHP"><span class="font-icon icon iconfont icon-php" style=""></span>PHP<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="网络设备"><span class="title"><span class="font-icon icon iconfont icon-share" style=""></span>网络设备</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/Network/Routing/" class="nav-link" aria-label="Routing"><span class="font-icon icon iconfont icon-router" style=""></span>Routing<!----></a></li><li class="dropdown-item"><a href="/Network/Switching/" class="nav-link" aria-label="Switching"><span class="font-icon icon iconfont icon-tree" style=""></span>Switching<!----></a></li><li class="dropdown-item"><a href="/Network/Security/" class="nav-link" aria-label="Security"><span class="font-icon icon iconfont icon-safe" style=""></span>Security<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="渗透靶场"><span class="title"><span class="font-icon icon iconfont icon-activity" style=""></span>渗透靶场</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/Range/HTB/" class="nav-link" aria-label="HTB"><span class="font-icon icon iconfont icon-module" style=""></span>HTB<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-config" style=""></span><span class="title">安全工具</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-linux" style=""></span><span class="title">Linux系统内网安全</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-windows" style=""></span><span class="title">Windows系统内网安全</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/IntranetSec/WindowsSec/%E5%93%88%E5%B8%8C%E4%BC%A0%E9%80%92%E6%94%BB%E5%87%BB%EF%BC%88PTH%EF%BC%89.html" class="nav-link sidebar-link sidebar-page" aria-label="哈希传递攻击（PTH）"><!---->哈希传递攻击（PTH）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/%E6%B5%8F%E8%A7%88%E5%99%A8%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AD%89%E5%85%B6%E4%BB%96%E5%AF%86%E7%A0%81%E7%9A%84%E6%8A%93%E5%8F%96.html" class="nav-link sidebar-link sidebar-page" aria-label="浏览器、数据库等其他密码的抓取"><!---->浏览器、数据库等其他密码的抓取<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/%E5%AF%86%E7%A0%81%E5%96%B7%E6%B4%92%E6%94%BB%E5%87%BB.html" class="nav-link sidebar-link sidebar-page" aria-label="密码喷洒攻击"><!---->密码喷洒攻击<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/%E5%AF%86%E9%92%A5%E4%BC%A0%E9%80%92%E6%94%BB%E5%87%BB%EF%BC%88PTK%EF%BC%89.html" class="nav-link sidebar-link sidebar-page" aria-label="密钥传递攻击（PTK）"><!---->密钥传递攻击（PTK）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.html" class="nav-link sidebar-link sidebar-page" aria-label="敏感信息收集"><!---->敏感信息收集<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/%E5%86%85%E7%BD%91%E7%AB%AF%E5%8F%A3%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.html" class="nav-link sidebar-link sidebar-page" aria-label="内网端口信息收集"><!---->内网端口信息收集<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/%E5%86%85%E7%BD%91%E4%B8%BB%E6%9C%BA%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.html" class="nav-link sidebar-link sidebar-page" aria-label="内网主机基本信息收集（命令）"><!---->内网主机基本信息收集（命令）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/%E5%86%85%E7%BD%91IP%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%EF%BC%88%E5%B7%A5%E5%85%B7%EF%BC%89.html" class="nav-link sidebar-link sidebar-page" aria-label="内网IP信息收集"><!---->内网IP信息收集<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/%E7%A5%A8%E6%8D%AE%E4%BC%A0%E9%80%92%E6%94%BB%E5%87%BB%EF%BC%88PTT%EF%BC%89.html" class="nav-link sidebar-link sidebar-page" aria-label="票据传递攻击（PTT）"><!---->票据传递攻击（PTT）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/%E5%9F%9F%E5%86%85%E5%9F%BA%E7%A1%80%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.html" class="nav-link sidebar-link sidebar-page" aria-label="域内基础信息收集"><!---->域内基础信息收集<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/%E6%8A%93%E5%8F%96Windows%E5%AF%86%E7%A0%81.html" class="nav-link sidebar-link sidebar-page" aria-label="抓取windows密码"><!---->抓取windows密码<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/IPC%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8.html" class="nav-link sidebar-link sidebar-page" aria-label="IPC横向移动"><!---->IPC横向移动<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/Kerberos%E7%99%BD%E9%93%B6%E7%A5%A8%E6%8D%AE.html" class="nav-link sidebar-link sidebar-page" aria-label="Kerberos白银票据"><!---->Kerberos白银票据<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/Kerberos%E9%BB%84%E9%87%91%E7%A5%A8%E6%8D%AE.html" class="nav-link sidebar-link sidebar-page" aria-label="Kerberos黄金票据"><!---->Kerberos黄金票据<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/Mimikatz%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8.html" class="nav-link sidebar-link sidebar-page" aria-label="Mimikatz工具的使用"><!---->Mimikatz工具的使用<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/PsExec%E5%B7%A5%E5%85%B7%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8.html" class="nav-link sidebar-link sidebar-page" aria-label="PsExec工具远程命令执行横向移动"><!---->PsExec工具远程命令执行横向移动<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/PTT%E6%94%BB%E5%87%BB%E4%B9%8BMS14-068.html" class="nav-link sidebar-link sidebar-page" aria-label="PTT攻击之MS14-068"><!---->PTT攻击之MS14-068<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/RDP%E5%AF%86%E7%A0%81%E8%8E%B7%E5%8F%96.html" class="nav-link sidebar-link sidebar-page" aria-label="RDP密码获取"><!---->RDP密码获取<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/smbexec%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8.html" class="nav-link sidebar-link sidebar-page" aria-label="smbexec横向移动"><!---->smbexec横向移动<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/Windows%E8%A2%AB%E6%8A%93%E5%AF%86%E7%A0%81%E7%9A%84%E9%98%B2%E5%BE%A1%E6%89%8B%E6%AE%B5.html" class="nav-link sidebar-link sidebar-page" aria-label="Windows被抓密码的防御手段"><!---->Windows被抓密码的防御手段<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/Windows%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81.html" class="nav-link sidebar-link sidebar-page" aria-label="Windows权限维持"><!---->Windows权限维持<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/IntranetSec/WindowsSec/Windows%E8%AE%A4%E8%AF%81%E5%8E%9F%E7%90%86.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Windows认证原理"><!---->Windows认证原理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/IntranetSec/WindowsSec/Windows%E8%AE%A4%E8%AF%81%E5%8E%9F%E7%90%86.html#windows认证原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Windows认证原理"><!---->Windows认证原理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/IntranetSec/WindowsSec/Windows%E8%AE%A4%E8%AF%81%E5%8E%9F%E7%90%86.html#windows认证" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Windows认证"><!---->Windows认证<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/IntranetSec/WindowsSec/Windows%E8%AE%A4%E8%AF%81%E5%8E%9F%E7%90%86.html#windwos本地认证" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Windwos本地认证"><!---->Windwos本地认证<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/Windows%E6%8F%90%E6%9D%83.html" class="nav-link sidebar-link sidebar-page" aria-label="Windows提权"><!---->Windows提权<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/Windows%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94.html" class="nav-link sidebar-link sidebar-page" aria-label="Windows应急响应"><!---->Windows应急响应<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/Windows%E5%9F%9F%E8%AE%A4%E8%AF%81.html" class="nav-link sidebar-link sidebar-page" aria-label="Windows域认证"><!---->Windows域认证<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/IntranetSec/WindowsSec/WMIC%E8%BF%9C%E7%A8%8B%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8.html" class="nav-link sidebar-link sidebar-page" aria-label="WMIC远程命令执行横向移动"><!---->WMIC远程命令执行横向移动<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Windows认证原理</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://hzyxy.github.io" target="_blank" rel="noopener noreferrer">XY</a></span><span property="author" content="XY"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-11-21T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 6 分钟</span><meta property="timeRequired" content="PT6M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category1 clickable" role="navigation">内网安全</span><meta property="articleSection" content="内网安全"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag6 clickable" role="navigation">Windows系统内网安全</span><meta property="keywords" content="Windows系统内网安全"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/IntranetSec/WindowsSec/Windows%E8%AE%A4%E8%AF%81%E5%8E%9F%E7%90%86.html#windows认证原理" class="router-link-active router-link-exact-active toc-link level2">Windows认证原理</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/IntranetSec/WindowsSec/Windows%E8%AE%A4%E8%AF%81%E5%8E%9F%E7%90%86.html#windows认证" class="router-link-active router-link-exact-active toc-link level3">Windows认证</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/IntranetSec/WindowsSec/Windows%E8%AE%A4%E8%AF%81%E5%8E%9F%E7%90%86.html#windwos本地认证" class="router-link-active router-link-exact-active toc-link level3">Windwos本地认证</a></li><!----><!--]--></ul></li><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h2 id="windows认证原理" tabindex="-1"><a class="header-anchor" href="#windows认证原理" aria-hidden="true">#</a> Windows认证原理</h2><h3 id="windows认证" tabindex="-1"><a class="header-anchor" href="#windows认证" aria-hidden="true">#</a> Windows认证</h3><ul><li>本地认证</li><li>网络认证</li><li>域认证</li></ul><p>Windwos存放密码的文件： C:\Windows\System32\config\SAM %SystemRoot%\system32\config\SAM</p><p>用来认证的程序：Lsass.exe</p><h3 id="windwos本地认证" tabindex="-1"><a class="header-anchor" href="#windwos本地认证" aria-hidden="true">#</a> Windwos本地认证</h3><h4 id="本地认证流程" tabindex="-1"><a class="header-anchor" href="#本地认证流程" aria-hidden="true">#</a> 本地认证流程</h4><ul><li>Windows的登陆密码是储存在系统本地的SAM文件中的，在登陆Windows的时候，系统会将用户输入的密码与SAM文件中的密码进行对比，如果相同，则认证成功</li><li>自己不可以打开SAM文件</li></ul><img src="/assets/1-dc235df6.jpg"><ul><li><p>首先，用户注销、重启、锁屏后，操作系统会让winlogon.exe显示登陆界面，也就是输入框界面，接收用户的输入信息后，将密码交给lsass进程，这个过程中会将明文密码保存一份，然后生成一份NTLM Hash，然后将生成的NTLM Hash和本地SAM数据库进行比较。</p></li><li><p>Windows Logon Process（即winlogon.exe）：是Windows NT 用户登陆程序，用于管理用户登陆和退出</p></li><li><p>LSASS：用于微软Windows系统的安全机制，它用于本地安全和登陆策略</p></li><li><p>本地认证中用来处理用户输入密码的进程即lsass.exe,密码会在这个进程中明文保存，供该进程将密码计算成NTLM Hash与sam进行比对，我们使用mimikatz来获取的明文密码，便是在这个进程中读取到的</p></li></ul><h4 id="lm和ntlm哈希" tabindex="-1"><a class="header-anchor" href="#lm和ntlm哈希" aria-hidden="true">#</a> LM和NTLM哈希</h4><ul><li>Windows不存储用户的明文密码</li><li>Windwos操作系统中密码一般由两部分组成,一部分为LM Hash,另一部分为NTLMHash（两者均为相同的密码，只是不同的算法）。</li><li>username:RID:LM‐HASH:NT‐HASH</li></ul><img src="/assets/2-d982a504.jpg"><h5 id="lan-manager-hash挑战-响应验证机制-lm-hash" tabindex="-1"><a class="header-anchor" href="#lan-manager-hash挑战-响应验证机制-lm-hash" aria-hidden="true">#</a> LAN Manager Hash挑战/响应验证机制（LM Hash）</h5><ul><li>LM Hash的全名为&quot;LAN Manager Hash&quot;,是微软为了提高 Windows操作系统的安全性而采 用的散列加密算法,其本质是DES加密。尽管 LM Hash较容易被破解,但为了保证系统的兼容性, Windows只是将LM Hash禁用了(从 Windows vista和 Windows Server2008版本开始, Windows操作系统默认禁用 LM Hash)。 LM Hash明文密码被限定在14位以内,也就是说,如果要停止使用 LM Hash,将用户的密码设置为14位以上即可。如果 LM Hash被禁用了, 攻击者通过工具抓取的 LM Hash通常 为<code>AAD3B435B51404EEAAD3B435B51404EE</code>(表示 LM Hash为空值或被禁用)</li></ul><h6 id="原理" tabindex="-1"><a class="header-anchor" href="#原理" aria-hidden="true">#</a> 原理</h6><ol><li>将明文口令转换为其大写的形式，然后将大写后的口令转换为16进制的字符串，如果转换后不足14字节则用0补全，最后将上述编码分成2组7字节。</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>明文口令：Admin@123

1.转换为大写：ADMIN@123

2.转换为16进制字符串：41444D494E40313233 （不足14字节）

用0补全：41 44 4D 49 4E 40 31 32 33 00 00 00 00 00

3.分成两组：
41 44 4D 49 4E 40 31
32 33 00 00 00 00 00
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>首先将每一组7字节的十六进制转换为二进制，然后分每7bit一组末尾加0，最后再转换成十六进制组得到2组8字节的编码。</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>第一组：
1.将第一组7字节的十六进制转换为二进制
41444D494E4031转换为二进制：01000001010001000100110101001001010011100100000000110001

2.分组，每7bit为一组并在末尾加一个0
01000000
10100010
00010010
10101000
10010100
01110010
00000000
01100010
合并后为：0100000010100010000100101010100010010100011100100000000001100010

3.再转换为16进制：
40A212A894720062

第二组：
1.将第二组7字节的十六进制转换为二进制
32330000000000转换为二进制：00110010001100110000000000000000000000000000000000000000

2.分组，每7bit为一组并在末尾加一个0
00110010
00011000
11000000
00000000
00000000
00000000
00000000
00000000
合并后为：0011001000011000110000000000000000000000000000000000000000000000

3.再转换为16进制：
3218C00000000000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>将上述步骤得到的两组16进制的8字节编码，分别进行des加密。加密的key为<code>KGS!@#$%</code>的16进制。（4B47532140232425）</li></ol><img src="/assets/3-e18f563c.jpg"><img src="/assets/4-24396686.jpg"><p>最后将两次des加密的结果拼接起来： 6F08D7B306B1DAD4B75E0C8D76954A50</p><h5 id="windowsnt-hash挑战-响应验证机制-ntlm-hash" tabindex="-1"><a class="header-anchor" href="#windowsnt-hash挑战-响应验证机制-ntlm-hash" aria-hidden="true">#</a> WindowsNT Hash挑战/响应验证机制（NTLM Hash）</h5><ul><li>NTLM Hash是微软为了在提高安全性的同时保证兼容性而设计的散列加密算法。 NTLM Hash 是基于MD4加密算法进行加密的。个人版从 Windows vista以后,服务器版从Windows Server 2003以后, Windows操作系统的认证方 式均为 NTLM Hash</li><li>为了解决LM加密和身份验证方案中固有的安全弱点，Microsoft 于1993年在Windows NT 3.1中引入了NTLM协 议。下面是各个版本对LM和NTLM的支持。</li></ul><h6 id="原理-1" tabindex="-1"><a class="header-anchor" href="#原理-1" aria-hidden="true">#</a> 原理</h6><ol><li>首先将明文密码转换成十六进制字符串，然后转换为Unicode格式，即每个字节为一组在末尾添加0x00</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>明文口令：Admin@123

1.转换成十六进制字符串：
41646D696E40313233

2.转换为Unicode格式，每个字节为一组，在末尾添加0x00
4100 6400 6D00 6900 6E00 4000 3100 3200 3300
合并
410064006D0069006E004000310032003300

3.对Unicode字符串执行md4加密，生成32位的十六进制字符串：
570a9a65db8fba761c1008a51d4c95ab
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="/assets/5-c87d9fcc.jpg"><h4 id="ntlm协议" tabindex="-1"><a class="header-anchor" href="#ntlm协议" aria-hidden="true">#</a> NTLM协议</h4><ul><li><p>在平时的测试中，经常会碰到处于工作组的计算机，处于工作组的计算机之间是无法建立一个可信的信托机构的， 只能是点对点进行信息的传输。举个例子就是，主机A想要访问主机B上的资源，就要向主机B发送一个存在于主机B上的一个账户，主机B接收以后会在本地进行验证，如果验证成功，才会允许主机A进行相应的访问。</p></li><li><p>NTLM 协议是一种基于 挑战（Chalenge）/响应（Response） 认证机制，仅支持Windows的网络认证协议。</p></li><li><p>主要分为协商、质询、验证三个过程</p></li></ul><p>协商：这个是为了解决历史遗留问题，也就是为了向下兼容，双方先确定一下传输协议的版本等各种信息。</p><p>质询：就是挑战/响应认证机制起作用的范畴</p><p>验证：对质询的最后结果进行一个验证，验证通过后，即允许访问资源。</p><h5 id="认证流程" tabindex="-1"><a class="header-anchor" href="#认证流程" aria-hidden="true">#</a> 认证流程</h5><ol><li>客户端向服务端发送用户信息（用户名）请求</li><li>服务器接受到请求，判断本地账户列表是否有用户名，如果有，生成一个16位的随机数，被称之为“Challenge”，使用登陆用户名对应NTLM Hash加密Challenge（16位随机字符），生成Challenge1，生成一个Net-NTLM Hash存在内存中，同时，生成Challenge1后，将Challenge（16位随机字符）发送给客户端。</li><li>客户端接收到Challenge后，使用将要登陆的账户对应的NTLM Hash加密Challenge生成Response，然后将Response发送至服务器端。</li><li>验证，服务器接收到客户端的Response后，对比Challenge1与Response是否相等，若相等，则认证通过。</li></ol></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><!----><!----></div></footer><nav class="page-nav"><a href="/IntranetSec/WindowsSec/Windows%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81.html" class="nav-link prev" aria-label="Windows权限维持"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->Windows权限维持</div></a><a href="/IntranetSec/WindowsSec/Windows%E6%8F%90%E6%9D%83.html" class="nav-link next" aria-label="Windows提权"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">Windows提权<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">没想好搁着先</div><div class="copyright">Copyright © 2023 XY</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-dd5faae6.js" defer></script>
  </body>
</html>
